// ========================================
// ActionFlix - Renderer Process
// ========================================

// State
let currentMovieData = null;
let selectedMovieId = null;
let currentLanguage = 'English';

// ========================================
// Translations
// ========================================

const translations = {
  English: {
    // Navigation
    'nav.home': 'Home',
    'nav.transform': 'Transform',
    'nav.top10': 'Inspire Me',
    'nav.collection': 'My Collection',
    
    // Home view
    'home.heroTitle': 'Transform Any Rom-Com Into An<br><span class="highlight">Action Blockbuster</span>',
    'home.heroSubtitle': 'Because even romantic comedies deserve explosions and car chases... everything\'s better with adrenaline!',
    'home.startRomanticizing': 'Start Actionizing',
    'home.howItWorks': 'How It Works',
    'home.feature1Title': 'Enter Any Rom-Com',
    'home.feature1Desc': 'Type in any romantic comedy or love story title',
    'home.feature2Title': 'AI Transforms It',
    'home.feature2Desc': 'Our AI creates an action-packed title, summary, and poster',
    'home.feature3Title': 'Explosive Poster',
    'home.feature3Desc': 'Get a stunning action movie poster generated by AI',
    'home.feature4Title': 'Save to Collection',
    'home.feature4Desc': 'Build your personal action movie collection',
    
    // Transform view
    'transform.title': 'Transform Your Movie',
    'transform.inputPlaceholder': 'Enter a rom-com title (e.g., The Notebook, Love Actually, When Harry Met Sally...)',
    'transform.romanticize': 'Actionize',
    'transform.romanticizing': 'Actionizing...',
    'transform.creatingPoster': 'Creating action poster...',
    'transform.originally': 'Originally',
    'transform.saveToCollection': 'Save to Collection',
    'transform.regenerate': 'Regenerate',
    
    // Progress bar
    'progress.step1': 'Fetching Movie',
    'progress.step2': 'Creating Title',
    'progress.step3': 'Writing Story',
    'progress.step4': 'Generating Poster',
    
    // Top 10 view
    'top10.title': 'Top 10 on Netflix - Actionized!',
    'top10.subtitle': 'Transform the hottest rom-coms & love stories into explosive action blockbusters',
    'top10.moviesCategory': 'Movies in Your Country Today',
    'top10.seriesCategory': 'TV Shows in Your Country Today',
    'top10.actionCategory': 'Romance Movies',
    'top10.scifiCategory': 'Drama & Comedy',
    'top10.romanticize': 'Actionize',
    'top10.romanticizeAll': 'Actionize All 10',
    'top10.romanticizing': 'Actionizing...',
    'top10.romanticGenre.movies': 'Action Movies',
    'top10.romanticGenre.series': 'Action TV Series',
    'top10.romanticGenre.action': 'Pure Action',
    'top10.romanticGenre.scifi': 'Action Thrillers',
    
    // Collection view
    'collection.title': 'My Action Collection',
    'collection.individualMovies': 'Individual Transformations',
    'collection.noMovies': 'No Movies Yet',
    'collection.emptyMessage': 'Start actionizing movies to build your collection!',
    'collection.transformMovie': 'Transform a Movie',
    'collection.originally': 'Originally',
    'collection.featured': 'Featured Action',
    'collection.moreInfo': 'More Info',
    // Action categories
    'collection.cat.recentlyAdded': 'Recently Added',
    'collection.cat.passionateDramas': 'High-Octane Thrillers',
    'collection.cat.starCrossedLovers': 'Rival Warriors',
    'collection.cat.actionRomance': 'Pure Action',
    'collection.cat.fantasyLove': 'Fantasy Action Epics',
    'collection.cat.sciFiRomance': 'Sci-Fi Warfare',
    'collection.cat.gothicRomance': 'Dark Action & Noir',
    'collection.cat.comedyRomance': 'Adrenaline Rush',
    'collection.cat.classicRomance': 'Classic Action Films',
    
    // Settings
    'settings.title': 'Settings',
    'settings.apiKeyLabel': 'OpenAI API Key',
    'settings.envKeyNotice': 'Using API key from environment variable (OPENAI_API_KEY)',
    'settings.apiKeyHint': 'Your API key is stored locally. You can also set the OPENAI_API_KEY environment variable.',
    'settings.imageModelLabel': 'Image Generation Model',
    'settings.textModelLabel': 'Text Generation Model',
    'settings.languageLabel': 'Language',
    'settings.tmdbApiKeyLabel': 'TMDB API Key',
    'settings.tmdbPlaceholder': 'Your TMDB API Key',
    'settings.testKey': 'Test Key',
    'settings.tmdbHint': 'Get your free API key from',
    'settings.countryLabel': 'Country (for Top 10)',
    'settings.countryHint': 'Top 10 movies will be based on popularity in this country',
    'settings.cancel': 'Cancel',
    'settings.save': 'Save Settings',
    
    // Movie detail
    'detail.originally': 'Originally',
    'detail.removeFromCollection': 'Remove from Collection',
    'detail.romanticized': 'Actionized',
    'detail.watchNow': 'Watch Now',
    'detail.share': 'Share',
    'detail.story': 'Story',
    
    // Toast messages
    'toast.settingsSaved': 'Settings saved successfully!',
    'toast.enterTitle': 'Please enter a movie title!',
    'toast.fetchingMovie': 'Fetching movie information...',
    'toast.addingMagic': 'Adding action-packed magic...',
    'toast.creatingPoster': 'Creating action poster...',
    'toast.transformComplete': 'Transformation complete!',
    'toast.noMovieToSave': 'No movie to save!',
    'toast.savedToCollection': 'Saved to your collection!',
    'toast.removedFromCollection': 'Removed from collection ğŸ’¥',
    'toast.failedToLoadTop10': 'Failed to load Top 10',
    'toast.failedToLoadCollection': 'Failed to load collection'
  },
  Dutch: {
    'nav.home': 'Home',
    'nav.transform': 'Transformeren',
    'nav.top10': 'Inspireer Mij',
    'nav.collection': 'Mijn Collectie',
    'home.heroTitle': 'Transformeer Elke Rom-Com Tot Een<br><span class="highlight">Actie Blockbuster</span>',
    'home.heroSubtitle': 'Want zelfs romantische komedies verdienen explosies en achtervolgingen... alles is beter met adrenaline!',
    'home.startRomanticizing': 'Start Actioneren',
    'home.howItWorks': 'Hoe Het Werkt',
    'home.feature1Title': 'Voer Een Rom-Com In',
    'home.feature1Desc': 'Typ een romantische komedie of liefdesverhaal titel',
    'home.feature2Title': 'AI Transformeert Het',
    'home.feature2Desc': 'Onze AI creÃ«ert een actie-packed titel, samenvatting en poster',
    'home.feature3Title': 'Explosieve Poster',
    'home.feature3Desc': 'Krijg een verbluffende actiefilm poster gegenereerd door AI',
    'home.feature4Title': 'Opslaan in Collectie',
    'home.feature4Desc': 'Bouw je persoonlijke actiefilm collectie',
    'transform.title': 'Transformeer Je Film',
    'transform.inputPlaceholder': 'Voer een rom-com titel in (bijv. The Notebook, Love Actually...)',
    'transform.romanticize': 'Actioneren',
    'transform.romanticizing': 'Aan het actioneren...',
    'transform.creatingPoster': 'Actie poster maken...',
    'transform.originally': 'Oorspronkelijk',
    'transform.saveToCollection': 'Opslaan in Collectie',
    'transform.regenerate': 'Opnieuw Genereren',
    'progress.step1': 'Film Ophalen',
    'progress.step2': 'Titel CreÃ«ren',
    'progress.step3': 'Verhaal Schrijven',
    'progress.step4': 'Poster Genereren',
    'top10.title': 'Top 10 op Netflix - Geactioneerd!',
    'top10.subtitle': 'Transformeer de populairste rom-coms & liefdesverhalen in explosieve actie blockbusters',
    'top10.moviesCategory': 'Films in Jouw Land Vandaag',
    'top10.seriesCategory': 'TV Series in Jouw Land Vandaag',
    'top10.actionCategory': 'Actie Films',
    'top10.scifiCategory': 'Drama & Komedie',
    'top10.romanticize': 'Actioneren',
    'top10.romanticizeAll': 'Actioneer Alle 10',
    'top10.romanticizing': 'Actioneren...',
    'top10.romanticGenre.movies': 'Actiefilms',
    'top10.romanticGenre.series': 'Actie TV Series',
    'top10.romanticGenre.action': 'Pure Actie',
    'top10.romanticGenre.scifi': 'Actie Thrillers',
    'collection.title': 'Mijn Actie Collectie',
    'collection.individualMovies': 'Individuele Transformaties',
    'collection.noMovies': 'Nog Geen Films',
    'collection.emptyMessage': 'Begin met het actioneren van films om je collectie op te bouwen!',
    'collection.transformMovie': 'Transformeer een Film',
    'collection.originally': 'Oorspronkelijk',
    'collection.featured': 'Uitgelichte Actie',
    'collection.moreInfo': 'Meer Info',
    'collection.cat.recentlyAdded': 'Recent Toegevoegd',
    'collection.cat.passionateDramas': 'High-Octane Thrillers',
    'collection.cat.starCrossedLovers': 'Rivaal Krijgers',
    'collection.cat.actionRomance': 'Pure Actie',
    'collection.cat.fantasyLove': 'Fantasy Actie Epos',
    'collection.cat.sciFiRomance': 'Sci-Fi Oorlogsvoering',
    'collection.cat.gothicRomance': 'Duistere Actie & Noir',
    'collection.cat.comedyRomance': 'Adrenaline Rush',
    'collection.cat.classicRomance': 'Klassieke Actiefilms',
    'settings.title': 'Instellingen',
    'settings.apiKeyLabel': 'OpenAI API Sleutel',
    'settings.envKeyNotice': 'Gebruikt API sleutel van omgevingsvariabele (OPENAI_API_KEY)',
    'settings.apiKeyHint': 'Je API sleutel wordt lokaal opgeslagen. Je kunt ook de OPENAI_API_KEY omgevingsvariabele instellen.',
    'settings.imageModelLabel': 'Afbeelding Generatie Model',
    'settings.textModelLabel': 'Tekst Generatie Model',
    'settings.languageLabel': 'Taal',
    'settings.tmdbApiKeyLabel': 'TMDB API Sleutel',
    'settings.tmdbPlaceholder': 'Jouw TMDB API Sleutel',
    'settings.testKey': 'Test Sleutel',
    'settings.tmdbHint': 'Haal je gratis API sleutel op van',
    'settings.countryLabel': 'Land (voor Top 10)',
    'settings.countryHint': 'Top 10 films worden gebaseerd op populariteit in dit land',
    'settings.cancel': 'Annuleren',
    'settings.save': 'Instellingen Opslaan',
    'detail.originally': 'Oorspronkelijk',
    'detail.removeFromCollection': 'Verwijderen uit Collectie',
    'detail.romanticized': 'Geactioneerd',
    'detail.watchNow': 'Nu Bekijken',
    'detail.share': 'Delen',
    'detail.story': 'Verhaal',
    'toast.settingsSaved': 'Instellingen succesvol opgeslagen!',
    'toast.enterTitle': 'Voer een filmtitel in!',
    'toast.fetchingMovie': 'Filminformatie ophalen...',
    'toast.addingMagic': 'Actie-packed magie toevoegen...',
    'toast.creatingPoster': 'Actie poster maken...',
    'toast.transformComplete': 'Transformatie voltooid!',
    'toast.noMovieToSave': 'Geen film om op te slaan!',
    'toast.savedToCollection': 'Opgeslagen in je collectie!',
    'toast.removedFromCollection': 'Verwijderd uit collectie ğŸ’¥',
    'toast.failedToLoadTop10': 'Kon Top 10 niet laden',
    'toast.failedToLoadCollection': 'Kon collectie niet laden'
  },
  French: {
    'nav.home': 'Accueil',
    'nav.transform': 'Transformer',
    'nav.top10': 'Inspirez-moi',
    'nav.collection': 'Ma Collection',
    'home.heroTitle': 'Transformez N\'importe Quelle ComÃ©die Romantique En<br><span class="highlight">Blockbuster D\'Action</span>',
    'home.heroSubtitle': 'Parce que mÃªme les comÃ©dies romantiques mÃ©ritent des explosions et des poursuites... tout est mieux avec de l\'adrÃ©naline!',
    'home.startRomanticizing': 'Commencer Ã  Actionner',
    'home.howItWorks': 'Comment Ã‡a Marche',
    'home.feature1Title': 'Entrez Une Rom-Com',
    'home.feature1Desc': 'Tapez n\'importe quel titre de comÃ©die romantique ou histoire d\'amour',
    'home.feature2Title': 'L\'IA Le Transforme',
    'home.feature2Desc': 'Notre IA crÃ©e un titre d\'action, un rÃ©sumÃ© et une affiche',
    'home.feature3Title': 'Affiche Explosive',
    'home.feature3Desc': 'Obtenez une superbe affiche de film d\'action gÃ©nÃ©rÃ©e par IA',
    'home.feature4Title': 'Sauvegarder',
    'home.feature4Desc': 'Construisez votre collection personnelle de films d\'action',
    'transform.title': 'Transformez Votre Film',
    'transform.inputPlaceholder': 'Entrez un titre de rom-com (ex: The Notebook, Love Actually...)',
    'transform.romanticize': 'Actionner',
    'transform.romanticizing': 'Actionnement...',
    'transform.creatingPoster': 'CrÃ©ation de l\'affiche d\'action...',
    'transform.originally': 'Ã€ l\'origine',
    'transform.saveToCollection': 'Ajouter Ã  la Collection',
    'transform.regenerate': 'RÃ©gÃ©nÃ©rer',
    'progress.step1': 'RÃ©cupÃ©ration du Film',
    'progress.step2': 'CrÃ©ation du Titre',
    'progress.step3': 'Ã‰criture de l\'Histoire',
    'progress.step4': 'GÃ©nÃ©ration de l\'Affiche',
    'top10.title': 'Top 10 sur Netflix - ActionnÃ©!',
    'top10.subtitle': 'Transformez les comÃ©dies romantiques et histoires d\'amour les plus populaires en blockbusters d\'action explosifs',
    'top10.moviesCategory': 'Films dans Votre Pays Aujourd\'hui',
    'top10.seriesCategory': 'SÃ©ries TV dans Votre Pays Aujourd\'hui',
    'top10.actionCategory': 'Films Romantiques',
    'top10.scifiCategory': 'Drame & ComÃ©die',
    'top10.romanticize': 'Actionner',
    'top10.romanticizeAll': 'Actionner les 10',
    'top10.romanticizing': 'Actionnement...',
    'top10.romanticGenre.movies': 'Films d\'Action',
    'top10.romanticGenre.series': 'SÃ©ries TV d\'Action',
    'top10.romanticGenre.action': 'Action Pure',
    'top10.romanticGenre.scifi': 'Thrillers d\'Action',
    'collection.title': 'Ma Collection d\'Action',
    'collection.individualMovies': 'Transformations Individuelles',
    'collection.noMovies': 'Pas Encore de Films',
    'collection.emptyMessage': 'Commencez Ã  actionner des films pour construire votre collection!',
    'collection.transformMovie': 'Transformer un Film',
    'collection.originally': 'Ã€ l\'origine',
    'collection.featured': 'Action en Vedette',
    'collection.moreInfo': 'Plus d\'Infos',
    'collection.cat.recentlyAdded': 'RÃ©cemment AjoutÃ©s',
    'collection.cat.passionateDramas': 'Thrillers High-Octane',
    'collection.cat.starCrossedLovers': 'Guerriers Rivaux',
    'collection.cat.actionRomance': 'Action Pure',
    'collection.cat.fantasyLove': 'Ã‰popÃ©es d\'Action Fantastique',
    'collection.cat.sciFiRomance': 'Guerre Sci-Fi',
    'collection.cat.gothicRomance': 'Action Sombre & Noir',
    'collection.cat.comedyRomance': 'MontÃ©e d\'AdrÃ©naline',
    'collection.cat.classicRomance': 'Films d\'Action Classiques',
    'settings.title': 'ParamÃ¨tres',
    'settings.apiKeyLabel': 'ClÃ© API OpenAI',
    'settings.envKeyNotice': 'Utilisation de la clÃ© API depuis la variable d\'environnement (OPENAI_API_KEY)',
    'settings.apiKeyHint': 'Votre clÃ© API est stockÃ©e localement. Vous pouvez aussi dÃ©finir la variable OPENAI_API_KEY.',
    'settings.imageModelLabel': 'ModÃ¨le de GÃ©nÃ©ration d\'Image',
    'settings.textModelLabel': 'ModÃ¨le de GÃ©nÃ©ration de Texte',
    'settings.languageLabel': 'Langue',
    'settings.tmdbApiKeyLabel': 'ClÃ© API TMDB',
    'settings.tmdbPlaceholder': 'Votre clÃ© API TMDB',
    'settings.testKey': 'Tester la ClÃ©',
    'settings.tmdbHint': 'Obtenez votre clÃ© API gratuite sur',
    'settings.countryLabel': 'Pays (pour le Top 10)',
    'settings.countryHint': 'Le Top 10 des films sera basÃ© sur la popularitÃ© dans ce pays',
    'settings.cancel': 'Annuler',
    'settings.save': 'Enregistrer',
    'detail.originally': 'Ã€ l\'origine',
    'detail.removeFromCollection': 'Retirer de la Collection',
    'detail.romanticized': 'ActionnÃ©',
    'detail.watchNow': 'Regarder Maintenant',
    'detail.share': 'Partager',
    'detail.story': 'Histoire',
    'toast.settingsSaved': 'ParamÃ¨tres enregistrÃ©s avec succÃ¨s!',
    'toast.enterTitle': 'Veuillez entrer un titre de film!',
    'toast.fetchingMovie': 'RÃ©cupÃ©ration des informations du film...',
    'toast.addingMagic': 'Ajout de la magie d\'action...',
    'toast.creatingPoster': 'CrÃ©ation de l\'affiche d\'action...',
    'toast.transformComplete': 'Transformation terminÃ©e!',
    'toast.noMovieToSave': 'Aucun film Ã  sauvegarder!',
    'toast.savedToCollection': 'AjoutÃ© Ã  votre collection!',
    'toast.removedFromCollection': 'RetirÃ© de la collection ğŸ’¥',
    'toast.failedToLoadTop10': 'Ã‰chec du chargement du Top 10',
    'toast.failedToLoadCollection': 'Ã‰chec du chargement de la collection'
  },
  Spanish: {
    'nav.home': 'Inicio',
    'nav.transform': 'Transformar',
    'nav.top10': 'InspÃ­rame',
    'nav.collection': 'Mi ColecciÃ³n',
    'home.heroTitle': 'Transforma Cualquier Rom-Com En<br><span class="highlight">Un Blockbuster de AcciÃ³n</span>',
    'home.heroSubtitle': 'Porque hasta las comedias romÃ¡nticas merecen explosiones y persecuciones... Â¡todo es mejor con adrenalina!',
    'home.startRomanticizing': 'Comenzar a Actionizar',
    'home.howItWorks': 'CÃ³mo Funciona',
    'home.feature1Title': 'Ingresa Una Rom-Com',
    'home.feature1Desc': 'Escribe cualquier tÃ­tulo de comedia romÃ¡ntica o historia de amor',
    'home.feature2Title': 'La IA Lo Transforma',
    'home.feature2Desc': 'Nuestra IA crea un tÃ­tulo de acciÃ³n, resumen y pÃ³ster',
    'home.feature3Title': 'PÃ³ster Explosivo',
    'home.feature3Desc': 'ObtÃ©n un impresionante pÃ³ster de pelÃ­cula de acciÃ³n generado por IA',
    'home.feature4Title': 'Guardar en ColecciÃ³n',
    'home.feature4Desc': 'Construye tu colecciÃ³n personal de pelÃ­culas de acciÃ³n',
    'transform.title': 'Transforma Tu PelÃ­cula',
    'transform.inputPlaceholder': 'Ingresa un tÃ­tulo de pelÃ­cula (ej: Die Hard, Terminator, Mad Max...)',
    'transform.romanticize': 'Actionizar',
    'transform.romanticizing': 'Actionizando...',
    'transform.creatingPoster': 'Creando pÃ³ster de acciÃ³n...',
    'transform.originally': 'Originalmente',
    'transform.saveToCollection': 'Guardar en ColecciÃ³n',
    'transform.regenerate': 'Regenerar',
    'progress.step1': 'Obteniendo PelÃ­cula',
    'progress.step2': 'Creando TÃ­tulo',
    'progress.step3': 'Escribiendo Historia',
    'progress.step4': 'Generando PÃ³ster',
    'top10.title': 'Â¡Top 10 en Netflix - Actionizado!',
    'top10.subtitle': 'Transforma las rom-coms y historias de amor mÃ¡s populares en blockbusters de acciÃ³n explosivos',
    'top10.moviesCategory': 'PelÃ­culas en Tu PaÃ­s Hoy',
    'top10.seriesCategory': 'Series de TV en Tu PaÃ­s Hoy',
    'top10.actionCategory': 'PelÃ­culas de AcciÃ³n',
    'top10.scifiCategory': 'Drama & Comedia',
    'top10.romanticize': 'Actionizar',
    'top10.romanticizeAll': 'Actionizar las 10',
    'top10.romanticizing': 'Actionizando...',
    'top10.romanticGenre.movies': 'PelÃ­culas de AcciÃ³n',
    'top10.romanticGenre.series': 'Series de TV de AcciÃ³n',
    'top10.romanticGenre.action': 'AcciÃ³n Pura',
    'top10.romanticGenre.scifi': 'Thrillers de AcciÃ³n',
    'collection.title': 'Mi ColecciÃ³n de AcciÃ³n',
    'collection.individualMovies': 'Transformaciones Individuales',
    'collection.noMovies': 'Sin PelÃ­culas AÃºn',
    'collection.emptyMessage': 'Â¡Comienza a actionizar pelÃ­culas para construir tu colecciÃ³n!',
    'collection.transformMovie': 'Transformar una PelÃ­cula',
    'collection.originally': 'Originalmente',
    'collection.featured': 'AcciÃ³n Destacada',
    'collection.moreInfo': 'MÃ¡s InformaciÃ³n',
    'collection.cat.recentlyAdded': 'AÃ±adidos Recientemente',
    'collection.cat.passionateDramas': 'Thrillers de Alta Velocidad',
    'collection.cat.starCrossedLovers': 'Guerreros Rivales',
    'collection.cat.actionRomance': 'AcciÃ³n Pura',
    'collection.cat.fantasyLove': 'Ã‰picas de AcciÃ³n FantÃ¡stica',
    'collection.cat.sciFiRomance': 'Guerra Sci-Fi',
    'collection.cat.gothicRomance': 'AcciÃ³n Oscura y Noir',
    'collection.cat.comedyRomance': 'Subida de Adrenalina',
    'collection.cat.classicRomance': 'PelÃ­culas de AcciÃ³n ClÃ¡sicas',
    'settings.title': 'ConfiguraciÃ³n',
    'settings.apiKeyLabel': 'Clave API de OpenAI',
    'settings.envKeyNotice': 'Usando clave API de variable de entorno (OPENAI_API_KEY)',
    'settings.apiKeyHint': 'Tu clave API se guarda localmente. TambiÃ©n puedes configurar la variable OPENAI_API_KEY.',
    'settings.imageModelLabel': 'Modelo de GeneraciÃ³n de Imagen',
    'settings.textModelLabel': 'Modelo de GeneraciÃ³n de Texto',
    'settings.languageLabel': 'Idioma',
    'settings.tmdbApiKeyLabel': 'Clave API de TMDB',
    'settings.tmdbPlaceholder': 'Tu clave API de TMDB',
    'settings.testKey': 'Probar Clave',
    'settings.tmdbHint': 'ObtÃ©n tu clave API gratuita en',
    'settings.countryLabel': 'PaÃ­s (para Top 10)',
    'settings.countryHint': 'El Top 10 de pelÃ­culas se basarÃ¡ en la popularidad en este paÃ­s',
    'settings.cancel': 'Cancelar',
    'settings.save': 'Guardar ConfiguraciÃ³n',
    'detail.originally': 'Originalmente',
    'detail.removeFromCollection': 'Eliminar de la ColecciÃ³n',
    'detail.romanticized': 'Actionizado',
    'detail.watchNow': 'Ver Ahora',
    'detail.share': 'Compartir',
    'detail.story': 'Historia',
    'toast.settingsSaved': 'Â¡ConfiguraciÃ³n guardada exitosamente!',
    'toast.enterTitle': 'Â¡Por favor ingresa un tÃ­tulo de pelÃ­cula!',
    'toast.fetchingMovie': 'Obteniendo informaciÃ³n de la pelÃ­cula...',
    'toast.addingMagic': 'AÃ±adiendo magia de acciÃ³n...',
    'toast.creatingPoster': 'Creando pÃ³ster de acciÃ³n...',
    'toast.transformComplete': 'Â¡TransformaciÃ³n completa!',
    'toast.noMovieToSave': 'Â¡No hay pelÃ­cula para guardar!',
    'toast.savedToCollection': 'Â¡Guardado en tu colecciÃ³n!',
    'toast.removedFromCollection': 'Eliminado de la colecciÃ³n ğŸ’”',
    'toast.failedToLoadTop10': 'Error al cargar Top 10',
    'toast.failedToLoadCollection': 'Error al cargar la colecciÃ³n'
  },
  German: {
    'nav.home': 'Startseite',
    'nav.transform': 'Transformieren',
    'nav.top10': 'Inspiriere Mich',
    'nav.collection': 'Meine Sammlung',
    'home.heroTitle': 'Verwandle Jede Rom-Com In Einen<br><span class="highlight">Action Blockbuster</span>',
    'home.heroSubtitle': 'Denn selbst romantische KomÃ¶dien verdienen Explosionen und Verfolgungsjagden... alles ist besser mit Adrenalin!',
    'home.startRomanticizing': 'Actionisieren Starten',
    'home.howItWorks': 'So Funktioniert Es',
    'home.feature1Title': 'Film Eingeben',
    'home.feature1Desc': 'Gib einen Rom-Com oder Liebesgeschichte Titel ein',
    'home.feature2Title': 'KI Transformiert Es',
    'home.feature2Desc': 'Unsere KI erstellt einen Action-Titel, eine Zusammenfassung und ein Poster',
    'home.feature3Title': 'Explosives Poster',
    'home.feature3Desc': 'Erhalte ein atemberaubendes Action-Filmposter, das von KI generiert wurde',
    'home.feature4Title': 'In Sammlung Speichern',
    'home.feature4Desc': 'Baue deine persÃ¶nliche Action-Filmsammlung auf',
    'transform.title': 'Transformiere Deinen Film',
    'transform.inputPlaceholder': 'Rom-Com Titel eingeben (z.B. The Notebook, Love Actually...)',
    'transform.romanticize': 'Actionisieren',
    'transform.romanticizing': 'Actionisiere...',
    'transform.creatingPoster': 'Erstelle Action-Poster...',
    'transform.originally': 'UrsprÃ¼nglich',
    'transform.saveToCollection': 'In Sammlung Speichern',
    'transform.regenerate': 'Neu Generieren',
    'progress.step1': 'Film Abrufen',
    'progress.step2': 'Titel Erstellen',
    'progress.step3': 'Geschichte Schreiben',
    'progress.step4': 'Poster Generieren',
    'top10.title': 'Top 10 auf Netflix - Actionisiert!',
    'top10.subtitle': 'Transformiere die beliebtesten Rom-Coms in explosive Action-Blockbuster',
    'top10.moviesCategory': 'Filme in Deinem Land Heute',
    'top10.seriesCategory': 'TV-Serien in Deinem Land Heute',
    'top10.actionCategory': 'Romantische Filme',
    'top10.scifiCategory': 'Sci-Fi & Thriller',
    'top10.romanticize': 'Actionisieren',
    'top10.romanticizeAll': 'Alle 10 Actionisieren',
    'top10.romanticizing': 'Actionisiere...',
    'top10.romanticGenre.movies': 'Action-Filme',
    'top10.romanticGenre.series': 'Action-TV-Serien',
    'top10.romanticGenre.action': 'Pure Action',
    'top10.romanticGenre.scifi': 'Action-Thriller',
    'collection.title': 'Meine Action-Sammlung',
    'collection.individualMovies': 'Einzelne Transformationen',
    'collection.noMovies': 'Noch Keine Filme',
    'collection.emptyMessage': 'Beginne mit dem Actionisieren von Filmen, um deine Sammlung aufzubauen!',
    'collection.transformMovie': 'Einen Film Transformieren',
    'collection.originally': 'UrsprÃ¼nglich',
    'collection.featured': 'AusgewÃ¤hlte Action',
    'collection.moreInfo': 'Mehr Infos',
    'collection.cat.recentlyAdded': 'KÃ¼rzlich HinzugefÃ¼gt',
    'collection.cat.passionateDramas': 'High-Octane Thriller',
    'collection.cat.starCrossedLovers': 'Rivalen-Krieger',
    'collection.cat.actionRomance': 'Pure Action',
    'collection.cat.fantasyLove': 'Fantasy-Action-Epen',
    'collection.cat.sciFiRomance': 'Sci-Fi KriegsfÃ¼hrung',
    'collection.cat.gothicRomance': 'Dunkle Action Noir',
    'collection.cat.comedyRomance': 'Adrenalin-Schub',
    'collection.cat.classicRomance': 'Klassische Action-Filme',
    'settings.title': 'Einstellungen',
    'settings.apiKeyLabel': 'OpenAI API-SchlÃ¼ssel',
    'settings.envKeyNotice': 'Verwendet API-SchlÃ¼ssel aus Umgebungsvariable (OPENAI_API_KEY)',
    'settings.apiKeyHint': 'Dein API-SchlÃ¼ssel wird lokal gespeichert. Du kannst auch die OPENAI_API_KEY Umgebungsvariable setzen.',
    'settings.imageModelLabel': 'Bildgenerierungsmodell',
    'settings.textModelLabel': 'Textgenerierungsmodell',
    'settings.languageLabel': 'Sprache',
    'settings.tmdbApiKeyLabel': 'TMDB API-SchlÃ¼ssel',
    'settings.tmdbPlaceholder': 'Dein TMDB API-SchlÃ¼ssel',
    'settings.testKey': 'SchlÃ¼ssel Testen',
    'settings.tmdbHint': 'Hol dir deinen kostenlosen API-SchlÃ¼ssel von',
    'settings.countryLabel': 'Land (fÃ¼r Top 10)',
    'settings.countryHint': 'Top 10 Filme basieren auf der PopularitÃ¤t in diesem Land',
    'settings.cancel': 'Abbrechen',
    'settings.save': 'Einstellungen Speichern',
    'detail.originally': 'UrsprÃ¼nglich',
    'detail.removeFromCollection': 'Aus Sammlung Entfernen',
    'detail.romanticized': 'Actionisiert',
    'detail.watchNow': 'Jetzt Ansehen',
    'detail.share': 'Teilen',
    'detail.story': 'Geschichte',
    'toast.settingsSaved': 'Einstellungen erfolgreich gespeichert!',
    'toast.enterTitle': 'Bitte gib einen Filmtitel ein!',
    'toast.fetchingMovie': 'Hole Filminformationen...',
    'toast.addingMagic': 'FÃ¼ge Action-Magie hinzu...',
    'toast.creatingPoster': 'Erstelle Action-Poster...',
    'toast.transformComplete': 'Transformation abgeschlossen!',
    'toast.noMovieToSave': 'Kein Film zum Speichern!',
    'toast.savedToCollection': 'In deiner Sammlung gespeichert!',
    'toast.removedFromCollection': 'Aus Sammlung entfernt ğŸ’¥',
    'toast.failedToLoadTop10': 'Top 10 konnte nicht geladen werden',
    'toast.failedToLoadCollection': 'Sammlung konnte nicht geladen werden'
  },
  Italian: {
    'nav.home': 'Home',
    'nav.transform': 'Trasforma',
    'nav.top10': 'Ispirami',
    'nav.collection': 'La Mia Collezione',
    'home.heroTitle': 'Trasforma Qualsiasi Rom-Com In<br><span class="highlight">Un Blockbuster d\'Azione</span>',
    'home.heroSubtitle': 'PerchÃ© anche i film horror meritano un lieto fine... e tutto Ã¨ meglio con un tocco d\'azione!',
    'home.startRomanticizing': 'Inizia ad Actionizzare',
    'home.howItWorks': 'Come Funziona',
    'home.feature1Title': 'Inserisci Un Film',
    'home.feature1Desc': 'Digita qualsiasi titolo di rom-com o storia d\'amore',
    'home.feature2Title': 'L\'IA Lo Trasforma',
    'home.feature2Desc': 'La nostra IA crea un titolo d\'azione, una trama e un poster',
    'home.feature3Title': 'Poster Esplosivo',
    'home.feature3Desc': 'Ottieni uno splendido poster di film d\'azione generato dall\'IA',
    'home.feature4Title': 'Salva nella Collezione',
    'home.feature4Desc': 'Costruisci la tua collezione personale di film d\'azione',
    'transform.title': 'Trasforma Il Tuo Film',
    'transform.inputPlaceholder': 'Inserisci un titolo rom-com (es: The Notebook, Love Actually...)',
    'transform.romanticize': 'Romanticizza',
    'transform.romanticizing': 'Actionizzando...',
    'transform.creatingPoster': 'Creazione poster d\'azione...',
    'transform.originally': 'Originariamente',
    'transform.saveToCollection': 'Salva nella Collezione',
    'transform.regenerate': 'Rigenera',
    'progress.step1': 'Recupero Film',
    'progress.step2': 'Creazione Titolo',
    'progress.step3': 'Scrittura Storia',
    'progress.step4': 'Generazione Poster',
    'top10.title': 'Top 10 su Netflix - Actionizzato!',
    'top10.subtitle': 'Trasforma le rom-com piÃ¹ popolari in blockbuster d\'azione esplosivi',
    'top10.moviesCategory': 'Film nel Tuo Paese Oggi',
    'top10.seriesCategory': 'Serie TV nel Tuo Paese Oggi',
    'top10.actionCategory': 'Film d\'Azione',
    'top10.scifiCategory': 'Fantascienza & Thriller',
    'top10.romanticize': 'Romanticizza',
    'top10.romanticizeAll': 'Romanticizza Tutti i 10',
    'top10.romanticizing': 'Actionizzando...',
    'top10.romanticGenre.movies': 'Film d\'Azione',
    'top10.romanticGenre.series': 'Serie TV d\'Azione',
    'top10.romanticGenre.action': 'Azione Romantica',
    'top10.romanticGenre.scifi': 'Storie d\'Amore Sci-Fi',
    'collection.title': 'La Mia Collezione d\'Azione',
    'collection.individualMovies': 'Trasformazioni Individuali',
    'collection.noMovies': 'Nessun Film Ancora',
    'collection.emptyMessage': 'Inizia a romanticizzare i film per costruire la tua collezione!',
    'collection.transformMovie': 'Trasforma un Film',
    'collection.originally': 'Originariamente',
    'collection.featured': 'Azione in Evidenza',
    'collection.moreInfo': 'Altre Info',
    'collection.cat.recentlyAdded': 'Aggiunti di Recente',
    'collection.cat.passionateDramas': 'Thriller ad Alta VelocitÃ ',
    'collection.cat.starCrossedLovers': 'Guerrieri Rivali',
    'collection.cat.actionRomance': 'Azione Romantica',
    'collection.cat.fantasyLove': 'Amore Fantasy e Incantato',
    'collection.cat.sciFiRomance': 'Guerra Sci-Fi',
    'collection.cat.gothicRomance': 'Romance Gotico e Oscuro',
    'collection.cat.comedyRomance': 'Romance Leggero',
    'collection.cat.classicRomance': 'Storie d\'Amore Classiche',
    'settings.title': 'Impostazioni',
    'settings.apiKeyLabel': 'Chiave API OpenAI',
    'settings.envKeyNotice': 'Usando chiave API dalla variabile d\'ambiente (OPENAI_API_KEY)',
    'settings.apiKeyHint': 'La tua chiave API Ã¨ memorizzata localmente. Puoi anche impostare la variabile OPENAI_API_KEY.',
    'settings.imageModelLabel': 'Modello Generazione Immagini',
    'settings.textModelLabel': 'Modello Generazione Testo',
    'settings.languageLabel': 'Lingua',
    'settings.tmdbApiKeyLabel': 'Chiave API TMDB',
    'settings.tmdbPlaceholder': 'La tua chiave API TMDB',
    'settings.testKey': 'Testa Chiave',
    'settings.tmdbHint': 'Ottieni la tua chiave API gratuita da',
    'settings.countryLabel': 'Paese (per Top 10)',
    'settings.countryHint': 'I film Top 10 si baseranno sulla popolaritÃ  in questo paese',
    'settings.cancel': 'Annulla',
    'settings.save': 'Salva Impostazioni',
    'detail.originally': 'Originariamente',
    'detail.removeFromCollection': 'Rimuovi dalla Collezione',
    'detail.romanticized': 'Actionizzato',
    'detail.watchNow': 'Guarda Ora',
    'detail.share': 'Condividi',
    'detail.story': 'Trama',
    'toast.settingsSaved': 'Impostazioni salvate con successo!',
    'toast.enterTitle': 'Per favore inserisci un titolo di film!',
    'toast.fetchingMovie': 'Recupero informazioni film...',
    'toast.addingMagic': 'Aggiunta magia d\'azione...',
    'toast.creatingPoster': 'Creazione poster d\'azione...',
    'toast.transformComplete': 'Trasformazione completata!',
    'toast.noMovieToSave': 'Nessun film da salvare!',
    'toast.savedToCollection': 'Salvato nella tua collezione!',
    'toast.removedFromCollection': 'Rimosso dalla collezione ğŸ’¥',
    'toast.failedToLoadTop10': 'Impossibile caricare Top 10',
    'toast.failedToLoadCollection': 'Impossibile caricare la collezione'
  },
  Portuguese: {
    'nav.home': 'InÃ­cio',
    'nav.transform': 'Transformar',
    'nav.top10': 'Inspire-me',
    'nav.collection': 'Minha ColeÃ§Ã£o',
    'home.heroTitle': 'Transforme Qualquer Rom-Com Em<br><span class="highlight">Um Blockbuster de AÃ§Ã£o</span>',
    'home.heroSubtitle': 'Porque atÃ© filmes de terror merecem um final feliz... e tudo fica melhor com um toque de aÃ§Ã£o!',
    'home.startRomanticizing': 'ComeÃ§ar a Actionizar',
    'home.howItWorks': 'Como Funciona',
    'home.feature1Title': 'Digite Um Filme',
    'home.feature1Desc': 'Digite qualquer tÃ­tulo de filme de aÃ§Ã£o, terror ou thriller',
    'home.feature2Title': 'A IA Transforma',
    'home.feature2Desc': 'Nossa IA cria um tÃ­tulo de aÃ§Ã£o, resumo e pÃ´ster',
    'home.feature3Title': 'PÃ´ster Explosivo',
    'home.feature3Desc': 'Obtenha um incrÃ­vel pÃ´ster de filme de aÃ§Ã£o gerado por IA',
    'home.feature4Title': 'Salvar na ColeÃ§Ã£o',
    'home.feature4Desc': 'Construa sua coleÃ§Ã£o pessoal de filmes de aÃ§Ã£o',
    'transform.title': 'Transforme Seu Filme',
    'transform.inputPlaceholder': 'Digite um tÃ­tulo de filme (ex: Die Hard, Terminator, Mad Max...)',
    'transform.romanticize': 'Actionizar',
    'transform.romanticizing': 'Actionizando...',
    'transform.creatingPoster': 'Criando pÃ´ster de aÃ§Ã£o...',
    'transform.originally': 'Originalmente',
    'transform.saveToCollection': 'Salvar na ColeÃ§Ã£o',
    'transform.regenerate': 'Regenerar',
    'progress.step1': 'Buscando Filme',
    'progress.step2': 'Criando TÃ­tulo',
    'progress.step3': 'Escrevendo HistÃ³ria',
    'progress.step4': 'Gerando PÃ´ster',
    'top10.title': 'Top 10 na Netflix - Actionizado!',
    'top10.subtitle': 'Transforme as rom-coms mais populares em blockbusters de aÃ§Ã£o explosivos',
    'top10.moviesCategory': 'Filmes no Seu PaÃ­s Hoje',
    'top10.seriesCategory': 'SÃ©ries de TV no Seu PaÃ­s Hoje',
    'top10.actionCategory': 'Filmes de AÃ§Ã£o',
    'top10.scifiCategory': 'FicÃ§Ã£o CientÃ­fica & Thriller',
    'top10.romanticize': 'Actionizar',
    'top10.romanticizeAll': 'Actionizar os 10',
    'top10.romanticizing': 'Actionizando...',
    'top10.romanticGenre.movies': 'Filmes De AÃ§Ã£o',
    'top10.romanticGenre.series': 'SÃ©ries de TV de AÃ§Ã£o',
    'top10.romanticGenre.action': 'AÃ§Ã£o Pura',
    'top10.romanticGenre.scifi': 'Thrillers de AÃ§Ã£o',
    'collection.title': 'Minha ColeÃ§Ã£o de AÃ§Ã£o',
    'collection.individualMovies': 'TransformaÃ§Ãµes Individuais',
    'collection.noMovies': 'Nenhum Filme Ainda',
    'collection.emptyMessage': 'Comece a romantizar filmes para construir sua coleÃ§Ã£o!',
    'collection.transformMovie': 'Transformar um Filme',
    'collection.originally': 'Originalmente',
    'collection.featured': 'AÃ§Ã£o em Destaque',
    'collection.moreInfo': 'Mais InformaÃ§Ãµes',
    'collection.cat.recentlyAdded': 'Adicionados Recentemente',
    'collection.cat.passionateDramas': 'Thrillers de Alta Velocidade',
    'collection.cat.starCrossedLovers': 'Guerreiros Rivais',
    'collection.cat.actionRomance': 'AÃ§Ã£o Pura',
    'collection.cat.fantasyLove': 'Amor FantÃ¡stico e Encantado',
    'collection.cat.sciFiRomance': 'Guerra Sci-Fi',
    'collection.cat.gothicRomance': 'Romance GÃ³tico e Sombrio',
    'collection.cat.comedyRomance': 'Descarga de Adrenalina',
    'collection.cat.classicRomance': 'Filmes de AÃ§Ã£o ClÃ¡ssicos',
    'settings.title': 'ConfiguraÃ§Ãµes',
    'settings.apiKeyLabel': 'Chave da API OpenAI',
    'settings.envKeyNotice': 'Usando chave da API da variÃ¡vel de ambiente (OPENAI_API_KEY)',
    'settings.apiKeyHint': 'Sua chave da API Ã© armazenada localmente. VocÃª tambÃ©m pode definir a variÃ¡vel OPENAI_API_KEY.',
    'settings.imageModelLabel': 'Modelo de GeraÃ§Ã£o de Imagem',
    'settings.textModelLabel': 'Modelo de GeraÃ§Ã£o de Texto',
    'settings.languageLabel': 'Idioma',
    'settings.tmdbApiKeyLabel': 'Chave API TMDB',
    'settings.tmdbPlaceholder': 'Sua chave API TMDB',
    'settings.testKey': 'Testar Chave',
    'settings.tmdbHint': 'Obtenha sua chave API gratuita em',
    'settings.countryLabel': 'PaÃ­s (para Top 10)',
    'settings.countryHint': 'Os filmes Top 10 serÃ£o baseados na popularidade neste paÃ­s',
    'settings.cancel': 'Cancelar',
    'settings.save': 'Salvar ConfiguraÃ§Ãµes',
    'detail.originally': 'Originalmente',
    'detail.removeFromCollection': 'Remover da ColeÃ§Ã£o',
    'detail.romanticized': 'Actionizado',
    'detail.watchNow': 'Assistir Agora',
    'detail.share': 'Compartilhar',
    'detail.story': 'HistÃ³ria',
    'toast.settingsSaved': 'ConfiguraÃ§Ãµes salvas com sucesso!',
    'toast.enterTitle': 'Por favor digite um tÃ­tulo de filme!',
    'toast.fetchingMovie': 'Buscando informaÃ§Ãµes do filme...',
    'toast.addingMagic': 'Adicionando magia de aÃ§Ã£o...',
    'toast.creatingPoster': 'Criando pÃ´ster de aÃ§Ã£o...',
    'toast.transformComplete': 'TransformaÃ§Ã£o completa!',
    'toast.noMovieToSave': 'Nenhum filme para salvar!',
    'toast.savedToCollection': 'Salvo na sua coleÃ§Ã£o!',
    'toast.removedFromCollection': 'Removido da coleÃ§Ã£o ğŸ’¥',
    'toast.failedToLoadTop10': 'Falha ao carregar Top 10',
    'toast.failedToLoadCollection': 'Falha ao carregar a coleÃ§Ã£o'
  },
  Japanese: {
    'nav.home': 'ãƒ›ãƒ¼ãƒ ',
    'nav.transform': 'å¤‰æ›',
    'nav.top10': 'ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³',
    'nav.collection': 'ãƒã‚¤ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³',
    'home.heroTitle': 'ã‚ã‚‰ã‚†ã‚‹ãƒ©ãƒ–ã‚³ãƒ¡ã‚’<br><span class="highlight">ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å¤§ä½œ</span>ã«å¤‰æ›',
    'home.heroSubtitle': 'ãƒ©ãƒ–ã‚³ãƒ¡ã§ã‚‚çˆ†ç™ºã¨ã‚«ãƒ¼ãƒã‚§ã‚¤ã‚¹ã«... ã‚¢ãƒ‰ãƒ¬ãƒŠãƒªãƒ³ã§å…¨ã¦ãŒã‚‚ã£ã¨è‰¯ããªã‚Šã¾ã™ï¼',
    'home.startRomanticizing': 'ã‚¢ã‚¯ã‚·ãƒ§ãƒ³åŒ–ã‚’é–‹å§‹',
    'home.howItWorks': 'ä½¿ã„æ–¹',
    'home.feature1Title': 'æ˜ ç”»ã‚’å…¥åŠ›',
    'home.feature1Desc': 'ãƒ©ãƒ–ã‚³ãƒ¡ã‚„æ‹æ„›æ˜ ç”»ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›',
    'home.feature2Title': 'AIãŒå¤‰æ›',
    'home.feature2Desc': 'AIãŒã‚¢ã‚¯ã‚·ãƒ§ãƒ³æº€è¼‰ã®ã‚¿ã‚¤ãƒˆãƒ«ã€ã‚ã‚‰ã™ã˜ã€ãƒã‚¹ã‚¿ãƒ¼ã‚’ä½œæˆ',
    'home.feature3Title': 'çˆ†ç™ºçš„ãªãƒã‚¹ã‚¿ãƒ¼',
    'home.feature3Desc': 'AIãŒç”Ÿæˆã—ãŸç´ æ•µãªãƒ­ãƒãƒ³ã‚¹æ˜ ç”»ãƒã‚¹ã‚¿ãƒ¼ã‚’å–å¾—',
    'home.feature4Title': 'ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«ä¿å­˜',
    'home.feature4Desc': 'ã‚ãªãŸã ã‘ã®ãƒ­ãƒãƒ³ã‚¹æ˜ ç”»ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½œæˆ',
    'transform.title': 'æ˜ ç”»ã‚’å¤‰æ›',
    'transform.inputPlaceholder': 'ãƒ©ãƒ–ã‚³ãƒ¡ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ï¼ˆä¾‹ï¼šãã¿ã«èª­ã‚€ç‰©èªã€ãƒ©ãƒ–ãƒ»ã‚¢ã‚¯ãƒãƒ¥ã‚¢ãƒªãƒ¼...ï¼‰',
    'transform.romanticize': 'ã‚¢ã‚¯ã‚·ãƒ§ãƒ³åŒ–',
    'transform.romanticizing': 'ã‚¢ã‚¯ã‚·ãƒ§ãƒ³åŒ–ä¸­...',
    'transform.creatingPoster': 'ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒã‚¹ã‚¿ãƒ¼ã‚’ä½œæˆä¸­...',
    'transform.originally': 'åŸé¡Œ',
    'transform.saveToCollection': 'ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«ä¿å­˜',
    'transform.regenerate': 'å†ç”Ÿæˆ',
    'progress.step1': 'æ˜ ç”»æƒ…å ±å–å¾—ä¸­',
    'progress.step2': 'ã‚¿ã‚¤ãƒˆãƒ«ä½œæˆä¸­',
    'progress.step3': 'ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ä½œæˆä¸­',
    'progress.step4': 'ãƒã‚¹ã‚¿ãƒ¼ç”Ÿæˆä¸­',
    'top10.title': 'Netflixãƒˆãƒƒãƒ—10 - ã‚¢ã‚¯ã‚·ãƒ§ãƒ³åŒ–ï¼',
    'top10.subtitle': 'äººæ°—ã®ãƒ©ãƒ–ã‚³ãƒ¡ã‚’çˆ†ç™ºçš„ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³å¤§ä½œã«å¤‰æ›',
    'top10.moviesCategory': 'ä»Šæ—¥ã®ã‚ãªãŸã®å›½ã®æ˜ ç”»',
    'top10.seriesCategory': 'ä»Šæ—¥ã®ã‚ãªãŸã®å›½ã®TVç•ªçµ„',
    'top10.actionCategory': 'ãƒ­ãƒãƒ³ã‚¹æ˜ ç”»',
    'top10.scifiCategory': 'SF & ã‚¹ãƒªãƒ©ãƒ¼',
    'top10.romanticize': 'ã‚¢ã‚¯ã‚·ãƒ§ãƒ³åŒ–',
    'top10.romanticizeAll': '10ä½œå“å…¨ã¦ã‚’ã‚¢ã‚¯ã‚·ãƒ§ãƒ³åŒ–',
    'top10.romanticizing': 'ã‚¢ã‚¯ã‚·ãƒ§ãƒ³åŒ–ä¸­...',
    'top10.romanticGenre.movies': 'ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ˜ ç”»',
    'top10.romanticGenre.series': 'ã‚¢ã‚¯ã‚·ãƒ§ãƒ³TVã‚·ãƒªãƒ¼ã‚º',
    'top10.romanticGenre.action': 'ãƒ”ãƒ¥ã‚¢ã‚¢ã‚¯ã‚·ãƒ§ãƒ³',
    'top10.romanticGenre.scifi': 'ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¹ãƒªãƒ©ãƒ¼',
    'collection.title': 'ãƒã‚¤ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³',
    'collection.individualMovies': 'å€‹åˆ¥å¤‰æ›',
    'collection.noMovies': 'ã¾ã æ˜ ç”»ãŒã‚ã‚Šã¾ã›ã‚“',
    'collection.emptyMessage': 'æ˜ ç”»ã‚’ã‚¢ã‚¯ã‚·ãƒ§ãƒ³åŒ–ã—ã¦ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½œã‚Šã¾ã—ã‚‡ã†ï¼',
    'collection.transformMovie': 'æ˜ ç”»ã‚’å¤‰æ›ã™ã‚‹',
    'collection.originally': 'åŸé¡Œ',
    'collection.featured': 'æ³¨ç›®ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³',
    'collection.moreInfo': 'è©³ç´°æƒ…å ±',
    'collection.cat.recentlyAdded': 'æœ€è¿‘è¿½åŠ ',
    'collection.cat.passionateDramas': 'ãƒã‚¤ã‚ªã‚¯ã‚¿ãƒ³ã‚¹ãƒªãƒ©ãƒ¼',
    'collection.cat.starCrossedLovers': 'ãƒ©ã‚¤ãƒãƒ«æˆ¦å£«',
    'collection.cat.actionRomance': 'ãƒ”ãƒ¥ã‚¢ã‚¢ã‚¯ã‚·ãƒ§ãƒ³',
    'collection.cat.fantasyLove': 'ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å™äº‹è©©',
    'collection.cat.sciFiRomance': 'SFæˆ¦äº‰',
    'collection.cat.gothicRomance': 'ãƒ€ãƒ¼ã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼†ãƒãƒ¯ãƒ¼ãƒ«',
    'collection.cat.comedyRomance': 'ã‚¢ãƒ‰ãƒ¬ãƒŠãƒªãƒ³ãƒ©ãƒƒã‚·ãƒ¥',
    'collection.cat.classicRomance': 'ã‚¯ãƒ©ã‚·ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ˜ ç”»',
    'settings.title': 'è¨­å®š',
    'settings.apiKeyLabel': 'OpenAI APIã‚­ãƒ¼',
    'settings.envKeyNotice': 'ç’°å¢ƒå¤‰æ•°ã‹ã‚‰APIã‚­ãƒ¼ã‚’ä½¿ç”¨ä¸­ (OPENAI_API_KEY)',
    'settings.apiKeyHint': 'APIã‚­ãƒ¼ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚OPENAI_API_KEYç’°å¢ƒå¤‰æ•°ã‚‚è¨­å®šã§ãã¾ã™ã€‚',
    'settings.imageModelLabel': 'ç”»åƒç”Ÿæˆãƒ¢ãƒ‡ãƒ«',
    'settings.textModelLabel': 'ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆãƒ¢ãƒ‡ãƒ«',
    'settings.languageLabel': 'è¨€èª',
    'settings.tmdbApiKeyLabel': 'TMDB APIã‚­ãƒ¼',
    'settings.tmdbPlaceholder': 'ã‚ãªãŸã®TMDB APIã‚­ãƒ¼',
    'settings.testKey': 'ã‚­ãƒ¼ã‚’ãƒ†ã‚¹ãƒˆ',
    'settings.tmdbHint': 'ç„¡æ–™ã®APIã‚­ãƒ¼ã‚’å–å¾—ï¼š',
    'settings.countryLabel': 'å›½ï¼ˆãƒˆãƒƒãƒ—10ç”¨ï¼‰',
    'settings.countryHint': 'ãƒˆãƒƒãƒ—10æ˜ ç”»ã¯ã“ã®å›½ã§ã®äººæ°—ã«åŸºã¥ãã¾ã™',
    'settings.cancel': 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«',
    'settings.save': 'è¨­å®šã‚’ä¿å­˜',
    'detail.originally': 'åŸé¡Œ',
    'detail.removeFromCollection': 'ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‹ã‚‰å‰Šé™¤',
    'detail.romanticized': 'ã‚¢ã‚¯ã‚·ãƒ§ãƒ³åŒ–æ¸ˆã¿',
    'detail.watchNow': 'ä»Šã™ãè¦‹ã‚‹',
    'detail.share': 'å…±æœ‰',
    'detail.story': 'ã‚¹ãƒˆãƒ¼ãƒªãƒ¼',
    'toast.settingsSaved': 'è¨­å®šãŒä¿å­˜ã•ã‚Œã¾ã—ãŸï¼',
    'toast.enterTitle': 'æ˜ ç”»ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼',
    'toast.fetchingMovie': 'æ˜ ç”»æƒ…å ±ã‚’å–å¾—ä¸­...',
    'toast.addingMagic': 'ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æº€è¼‰ã®é­”æ³•ã‚’è¿½åŠ ä¸­...',
    'toast.creatingPoster': 'ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒã‚¹ã‚¿ãƒ¼ã‚’ä½œæˆä¸­...',
    'toast.transformComplete': 'å¤‰æ›å®Œäº†ï¼',
    'toast.noMovieToSave': 'ä¿å­˜ã™ã‚‹æ˜ ç”»ãŒã‚ã‚Šã¾ã›ã‚“ï¼',
    'toast.savedToCollection': 'ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«ä¿å­˜ã—ã¾ã—ãŸï¼',
    'toast.removedFromCollection': 'ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‹ã‚‰å‰Šé™¤ã—ã¾ã—ãŸ ğŸ’¥',
    'toast.failedToLoadTop10': 'ãƒˆãƒƒãƒ—10ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—',
    'toast.failedToLoadCollection': 'ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—'
  },
  Korean: {
    'nav.home': 'í™ˆ',
    'nav.transform': 'ë³€í™˜',
    'nav.top10': 'ì˜ê° ì–»ê¸°',
    'nav.collection': 'ë‚´ ì»¬ë ‰ì…˜',
    'home.heroTitle': 'ëª¨ë“  ë¡œë§¨í‹± ì½”ë¯¸ë””ë¥¼<br><span class="highlight">ì•¡ì…˜ ë¸”ë¡ë²„ìŠ¤í„°</span>ë¡œ ë³€í™˜',
    'home.heroSubtitle': 'ë¡œë§¨í‹± ì½”ë¯¸ë””ë„ í­ë°œê³¼ ìë™ì°¨ ì¶”ê²©ì „ì„ ë°›ì„ ìê²©ì´ ìˆìŠµë‹ˆë‹¤... ì•„ë“œë ˆë‚ ë¦°ìœ¼ë¡œ ëª¨ë“  ê²ƒì´ ë” ì¢‹ì•„ì§‘ë‹ˆë‹¤!',
    'home.startRomanticizing': 'ì•¡ì…˜í™” ì‹œì‘',
    'home.howItWorks': 'ì‘ë™ ë°©ì‹',
    'home.feature1Title': 'ì˜í™” ì…ë ¥',
    'home.feature1Desc': 'ì•¡ì…˜, ê³µí¬ ë˜ëŠ” ìŠ¤ë¦´ëŸ¬ ì˜í™” ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”',
    'home.feature2Title': 'AIê°€ ë³€í™˜',
    'home.feature2Desc': 'AIê°€ ë¡œë§¨í‹±í•œ ì œëª©, ì¤„ê±°ë¦¬, í¬ìŠ¤í„°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤',
    'home.feature3Title': 'í­ë°œì ì¸ í¬ìŠ¤í„°',
    'home.feature3Desc': 'AIê°€ ìƒì„±í•œ ë©‹ì§„ ë¡œë§¨ìŠ¤ ì˜í™” í¬ìŠ¤í„°ë¥¼ ë°›ìœ¼ì„¸ìš”',
    'home.feature4Title': 'ì»¬ë ‰ì…˜ì— ì €ì¥',
    'home.feature4Desc': 'ë‚˜ë§Œì˜ ì•¡ì…˜ ì˜í™” ì»¬ë ‰ì…˜ì„ ë§Œë“œì„¸ìš”',
    'transform.title': 'ì˜í™” ë³€í™˜',
    'transform.inputPlaceholder': 'ì˜í™” ì œëª© ì…ë ¥ (ì˜ˆ: ë‹¤ì´í•˜ë“œ, í„°ë¯¸ë„¤ì´í„°, ë§¤ë“œë§¥ìŠ¤...)',
    'transform.romanticize': 'ì•¡ì…˜í™”',
    'transform.romanticizing': 'ì•¡ì…˜í™” ì¤‘...',
    'transform.creatingPoster': 'ì•¡ì…˜ í¬ìŠ¤í„° ìƒì„± ì¤‘...',
    'transform.originally': 'ì›ì œ',
    'transform.saveToCollection': 'ì»¬ë ‰ì…˜ì— ì €ì¥',
    'transform.regenerate': 'ë‹¤ì‹œ ìƒì„±',
    'progress.step1': 'ì˜í™” ì •ë³´ ê°€ì ¸ì˜¤ê¸°',
    'progress.step2': 'ì œëª© ìƒì„± ì¤‘',
    'progress.step3': 'ìŠ¤í† ë¦¬ ì‘ì„± ì¤‘',
    'progress.step4': 'í¬ìŠ¤í„° ìƒì„± ì¤‘',
    'top10.title': 'ë„·í”Œë¦­ìŠ¤ í†± 10 - ì•¡ì…˜í™”!',
    'top10.subtitle': 'ê°€ì¥ ì¸ê¸° ìˆëŠ” ì˜í™”ì™€ ì‹œë¦¬ì¦ˆë¥¼ ë¡œë§¨í‹± ê±¸ì‘ìœ¼ë¡œ ë³€í™˜',
    'top10.moviesCategory': 'ì˜¤ëŠ˜ ë‹¹ì‹  ë‚˜ë¼ì˜ ì˜í™”',
    'top10.seriesCategory': 'ì˜¤ëŠ˜ ë‹¹ì‹  ë‚˜ë¼ì˜ TV í”„ë¡œê·¸ë¨',
    'top10.actionCategory': 'ë¡œë§¨ìŠ¤ ì˜í™”',
    'top10.scifiCategory': 'SF & ìŠ¤ë¦´ëŸ¬',
    'top10.romanticize': 'ì•¡ì…˜í™”',
    'top10.romanticizeAll': '10ê°œ ëª¨ë‘ ì•¡ì…˜í™”',
    'top10.romanticizing': 'ì•¡ì…˜í™” ì¤‘...',
    'top10.romanticGenre.movies': 'ì•¡ì…˜ ì˜í™”',
    'top10.romanticGenre.series': 'ì•¡ì…˜ TV ì‹œë¦¬ì¦ˆ',
    'top10.romanticGenre.action': 'ìˆœìˆ˜ ì•¡ì…˜',
    'top10.romanticGenre.scifi': 'ì•¡ì…˜ ìŠ¤ë¦´ëŸ¬',
    'collection.title': 'ë‚´ ì•¡ì…˜ ì»¬ë ‰ì…˜',
    'collection.individualMovies': 'ê°œë³„ ë³€í™˜',
    'collection.noMovies': 'ì•„ì§ ì˜í™”ê°€ ì—†ìŠµë‹ˆë‹¤',
    'collection.emptyMessage': 'ì˜í™”ë¥¼ ì•¡ì…˜í™”í•˜ì—¬ ì»¬ë ‰ì…˜ì„ ë§Œë“¤ì–´ ë³´ì„¸ìš”!',
    'collection.transformMovie': 'ì˜í™” ë³€í™˜í•˜ê¸°',
    'collection.originally': 'ì›ì œ',
    'collection.featured': 'ì¶”ì²œ ë¡œë§¨ìŠ¤',
    'collection.moreInfo': 'ìƒì„¸ ì •ë³´',
    'collection.cat.recentlyAdded': 'ìµœê·¼ ì¶”ê°€',
    'collection.cat.passionateDramas': 'í•˜ì´ ì˜¥íƒ„ ìŠ¤ë¦´ëŸ¬',
    'collection.cat.starCrossedLovers': 'ë¼ì´ë²Œ ì „ì‚¬',
    'collection.cat.actionRomance': 'ìˆœìˆ˜ ì•¡ì…˜',
    'collection.cat.fantasyLove': 'íŒíƒ€ì§€ ì•¡ì…˜ ì„œì‚¬ì‹œ',
    'collection.cat.sciFiRomance': 'SF ì „ìŸ',
    'collection.cat.gothicRomance': 'ë‹¤í¬ ì•¡ì…˜ ëŠì™€ë¥´',
    'collection.cat.comedyRomance': 'ì•„ë“œë ˆë‚ ë¦° ëŸ¬ì‹œ',
    'collection.cat.classicRomance': 'í´ë˜ì‹ ì•¡ì…˜ ì˜í™”',
    'settings.title': 'ì„¤ì •',
    'settings.apiKeyLabel': 'OpenAI API í‚¤',
    'settings.envKeyNotice': 'í™˜ê²½ ë³€ìˆ˜ì—ì„œ API í‚¤ ì‚¬ìš© ì¤‘ (OPENAI_API_KEY)',
    'settings.apiKeyHint': 'API í‚¤ëŠ” ë¡œì»¬ì— ì €ì¥ë©ë‹ˆë‹¤. OPENAI_API_KEY í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.',
    'settings.imageModelLabel': 'ì´ë¯¸ì§€ ìƒì„± ëª¨ë¸',
    'settings.textModelLabel': 'í…ìŠ¤íŠ¸ ìƒì„± ëª¨ë¸',
    'settings.languageLabel': 'ì–¸ì–´',
    'settings.tmdbApiKeyLabel': 'TMDB API í‚¤',
    'settings.tmdbPlaceholder': 'ê·€í•˜ì˜ TMDB API í‚¤',
    'settings.testKey': 'í‚¤ í…ŒìŠ¤íŠ¸',
    'settings.tmdbHint': 'ë¬´ë£Œ API í‚¤ ë°›ê¸°:',
    'settings.countryLabel': 'êµ­ê°€ (í†± 10ìš©)',
    'settings.countryHint': 'í†± 10 ì˜í™”ëŠ” ì´ êµ­ê°€ì˜ ì¸ê¸°ë„ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•©ë‹ˆë‹¤',
    'settings.cancel': 'ì·¨ì†Œ',
    'settings.save': 'ì„¤ì • ì €ì¥',
    'detail.originally': 'ì›ì œ',
    'detail.removeFromCollection': 'ì»¬ë ‰ì…˜ì—ì„œ ì œê±°',
    'detail.romanticized': 'ì•¡ì…˜í™”ë¨',
    'detail.watchNow': 'ì§€ê¸ˆ ë³´ê¸°',
    'detail.share': 'ê³µìœ ',
    'detail.story': 'ìŠ¤í† ë¦¬',
    'toast.settingsSaved': 'ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!',
    'toast.enterTitle': 'ì˜í™” ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!',
    'toast.fetchingMovie': 'ì˜í™” ì •ë³´ ê°€ì ¸ì˜¤ëŠ” ì¤‘...',
    'toast.addingMagic': 'ë¡œë§¨í‹± ë§ˆë²• ì¶”ê°€ ì¤‘...',
    'toast.creatingPoster': 'ì•¡ì…˜ í¬ìŠ¤í„° ìƒì„± ì¤‘...',
    'toast.transformComplete': 'ë³€í™˜ ì™„ë£Œ!',
    'toast.noMovieToSave': 'ì €ì¥í•  ì˜í™”ê°€ ì—†ìŠµë‹ˆë‹¤!',
    'toast.savedToCollection': 'ì»¬ë ‰ì…˜ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!',
    'toast.removedFromCollection': 'ì»¬ë ‰ì…˜ì—ì„œ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤ ğŸ’”',
    'toast.failedToLoadTop10': 'í†± 10 ë¡œë“œ ì‹¤íŒ¨',
    'toast.failedToLoadCollection': 'ì»¬ë ‰ì…˜ ë¡œë“œ ì‹¤íŒ¨'
  },
  Chinese: {
    'nav.home': 'é¦–é¡µ',
    'nav.transform': 'è½¬æ¢',
    'nav.top10': 'çµæ„Ÿæ¨è',
    'nav.collection': 'æˆ‘çš„æ”¶è—',
    'home.heroTitle': 'å°†ä»»ä½•ç”µå½±è½¬å˜ä¸º<br><span class="highlight">æµªæ¼«æ°ä½œ</span>',
    'home.heroSubtitle': 'å› ä¸ºå³ä½¿æ˜¯ææ€–ç‰‡ä¹Ÿå€¼å¾—æ‹¥æœ‰å¹¸ç¦ç»“å±€...ä¸€åˆ‡åŠ ä¸Šæµªæ¼«å…ƒç´ éƒ½ä¼šæ›´ç¾å¥½ï¼',
    'home.startRomanticizing': 'å¼€å§‹åŠ¨ä½œåŒ–',
    'home.howItWorks': 'å¦‚ä½•è¿ä½œ',
    'home.feature1Title': 'è¾“å…¥ç”µå½±',
    'home.feature1Desc': 'è¾“å…¥ä»»ä½•åŠ¨ä½œã€ææ€–æˆ–æƒŠæ‚šç”µå½±æ ‡é¢˜',
    'home.feature2Title': 'AIè½¬æ¢',
    'home.feature2Desc': 'æˆ‘ä»¬çš„AIåˆ›å»ºæµªæ¼«æ ‡é¢˜ã€æ‘˜è¦å’Œæµ·æŠ¥',
    'home.feature3Title': 'çˆ†ç‚¸æ€§æµ·æŠ¥',
    'home.feature3Desc': 'è·å–AIç”Ÿæˆçš„ç²¾ç¾åŠ¨ä½œç”µå½±æµ·æŠ¥',
    'home.feature4Title': 'ä¿å­˜åˆ°æ”¶è—',
    'home.feature4Desc': 'å»ºç«‹æ‚¨çš„ä¸ªäººåŠ¨ä½œç”µå½±æ”¶è—',
    'transform.title': 'è½¬æ¢æ‚¨çš„ç”µå½±',
    'transform.inputPlaceholder': 'è¾“å…¥ç”µå½±æ ‡é¢˜ï¼ˆä¾‹å¦‚ï¼šè™èƒ†é¾™å¨ã€ç»ˆç»“è€…ã€ç–¯ç‹‚çš„éº¦å…‹æ–¯...ï¼‰',
    'transform.romanticize': 'åŠ¨ä½œåŒ–',
    'transform.romanticizing': 'æ­£åœ¨åŠ¨ä½œåŒ–...',
    'transform.creatingPoster': 'æ­£åœ¨åˆ›å»ºåŠ¨ä½œæµ·æŠ¥...',
    'transform.originally': 'åŸæ ‡é¢˜',
    'transform.saveToCollection': 'ä¿å­˜åˆ°æ”¶è—',
    'transform.regenerate': 'é‡æ–°ç”Ÿæˆ',
    'progress.step1': 'è·å–ç”µå½±ä¿¡æ¯',
    'progress.step2': 'åˆ›å»ºæ ‡é¢˜ä¸­',
    'progress.step3': 'ç¼–å†™æ•…äº‹ä¸­',
    'progress.step4': 'ç”Ÿæˆæµ·æŠ¥ä¸­',
    'top10.title': 'Netflixå‰10 - å·²åŠ¨ä½œåŒ–ï¼',
    'top10.subtitle': 'å°†æœ€çƒ­é—¨çš„ç”µå½±å’Œå‰§é›†è½¬å˜ä¸ºæµªæ¼«æ°ä½œ',
    'top10.moviesCategory': 'ä»Šæ—¥æ‚¨æ‰€åœ¨å›½å®¶çš„ç”µå½±',
    'top10.seriesCategory': 'ä»Šæ—¥æ‚¨æ‰€åœ¨å›½å®¶çš„ç”µè§†èŠ‚ç›®',
    'top10.actionCategory': 'çˆ±æƒ…ç”µå½±',
    'top10.scifiCategory': 'ç§‘å¹» & æƒŠæ‚š',
    'top10.romanticize': 'åŠ¨ä½œåŒ–',
    'top10.romanticizeAll': 'åŠ¨ä½œåŒ–å…¨éƒ¨10éƒ¨',
    'top10.romanticizing': 'æ­£åœ¨åŠ¨ä½œåŒ–...',
    'top10.romanticGenre.movies': 'åŠ¨ä½œç”µå½±',
    'top10.romanticGenre.series': 'åŠ¨ä½œç”µè§†å‰§',
    'top10.romanticGenre.action': 'çº¯åŠ¨ä½œ',
    'top10.romanticGenre.scifi': 'åŠ¨ä½œæƒŠæ‚š',
    'collection.title': 'æˆ‘çš„åŠ¨ä½œæ”¶è—',
    'collection.individualMovies': 'å•ç‹¬è½¬æ¢',
    'collection.noMovies': 'è¿˜æ²¡æœ‰ç”µå½±',
    'collection.emptyMessage': 'å¼€å§‹åŠ¨ä½œåŒ–ç”µå½±æ¥å»ºç«‹æ‚¨çš„æ”¶è—ï¼',
    'collection.transformMovie': 'è½¬æ¢ç”µå½±',
    'collection.originally': 'åŸæ ‡é¢˜',
    'collection.featured': 'ç²¾é€‰æµªæ¼«',
    'collection.moreInfo': 'æ›´å¤šä¿¡æ¯',
    'collection.cat.recentlyAdded': 'æœ€è¿‘æ·»åŠ ',
    'collection.cat.passionateDramas': 'æ¿€æƒ…æˆå‰§',
    'collection.cat.starCrossedLovers': 'ç¦å¿Œä¹‹æ‹',
    'collection.cat.actionRomance': 'åŠ¨ä½œæµªæ¼«',
    'collection.cat.fantasyLove': 'å¥‡å¹»é­”æ³•ä¹‹çˆ±',
    'collection.cat.sciFiRomance': 'ç§‘å¹»æˆ˜äº‰',
    'collection.cat.gothicRomance': 'å“¥ç‰¹ä¸æš—é»‘æµªæ¼«',
    'collection.cat.comedyRomance': 'è‚¾ä¸Šè…ºç´ é£™å‡',
    'collection.cat.classicRomance': 'ç»å…¸åŠ¨ä½œç”µå½±',
    'settings.title': 'è®¾ç½®',
    'settings.apiKeyLabel': 'OpenAI APIå¯†é’¥',
    'settings.envKeyNotice': 'æ­£åœ¨ä½¿ç”¨ç¯å¢ƒå˜é‡ä¸­çš„APIå¯†é’¥ (OPENAI_API_KEY)',
    'settings.apiKeyHint': 'æ‚¨çš„APIå¯†é’¥å­˜å‚¨åœ¨æœ¬åœ°ã€‚æ‚¨ä¹Ÿå¯ä»¥è®¾ç½®OPENAI_API_KEYç¯å¢ƒå˜é‡ã€‚',
    'settings.imageModelLabel': 'å›¾åƒç”Ÿæˆæ¨¡å‹',
    'settings.textModelLabel': 'æ–‡æœ¬ç”Ÿæˆæ¨¡å‹',
    'settings.languageLabel': 'è¯­è¨€',
    'settings.tmdbApiKeyLabel': 'TMDB APIå¯†é’¥',
    'settings.tmdbPlaceholder': 'æ‚¨çš„TMDB APIå¯†é’¥',
    'settings.testKey': 'æµ‹è¯•å¯†é’¥',
    'settings.tmdbHint': 'è·å–å…è´¹APIå¯†é’¥ï¼š',
    'settings.countryLabel': 'å›½å®¶ï¼ˆç”¨äºå‰10ï¼‰',
    'settings.countryHint': 'å‰10ç”µå½±å°†åŸºäºè¯¥å›½å®¶çš„çƒ­é—¨ç¨‹åº¦',
    'settings.cancel': 'å–æ¶ˆ',
    'settings.save': 'ä¿å­˜è®¾ç½®',
    'detail.originally': 'åŸæ ‡é¢˜',
    'detail.removeFromCollection': 'ä»æ”¶è—ä¸­ç§»é™¤',
    'detail.romanticized': 'å·²åŠ¨ä½œåŒ–',
    'detail.watchNow': 'ç«‹å³è§‚çœ‹',
    'detail.share': 'åˆ†äº«',
    'detail.story': 'æ•…äº‹',
    'toast.settingsSaved': 'è®¾ç½®ä¿å­˜æˆåŠŸï¼',
    'toast.enterTitle': 'è¯·è¾“å…¥ç”µå½±æ ‡é¢˜ï¼',
    'toast.fetchingMovie': 'æ­£åœ¨è·å–ç”µå½±ä¿¡æ¯...',
    'toast.addingMagic': 'æ­£åœ¨æ·»åŠ åŠ¨ä½œé­”æ³•...',
    'toast.creatingPoster': 'æ­£åœ¨åˆ›å»ºåŠ¨ä½œæµ·æŠ¥...',
    'toast.transformComplete': 'è½¬æ¢å®Œæˆï¼',
    'toast.noMovieToSave': 'æ²¡æœ‰è¦ä¿å­˜çš„ç”µå½±ï¼',
    'toast.savedToCollection': 'å·²ä¿å­˜åˆ°æ‚¨çš„æ”¶è—ï¼',
    'toast.removedFromCollection': 'å·²ä»æ”¶è—ä¸­ç§»é™¤ ğŸ’”',
    'toast.failedToLoadTop10': 'åŠ è½½å‰10å¤±è´¥',
    'toast.failedToLoadCollection': 'åŠ è½½æ”¶è—å¤±è´¥'
  }
};

// Get translation for a key
function t(key) {
  const lang = translations[currentLanguage] || translations['English'];
  return lang[key] || translations['English'][key] || key;
}

// Apply translations to all elements with data-i18n attribute
function applyTranslations() {
  // Translate text content
  document.querySelectorAll('[data-i18n]').forEach(element => {
    const key = element.getAttribute('data-i18n');
    const translation = t(key);
    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
      element.value = translation;
    } else {
      element.innerHTML = translation;
    }
  });
  
  // Translate placeholders
  document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
    const key = element.getAttribute('data-i18n-placeholder');
    element.placeholder = t(key);
  });
  
  // Translate title attributes (tooltips)
  document.querySelectorAll('[data-i18n-title]').forEach(element => {
    const key = element.getAttribute('data-i18n-title');
    element.title = t(key);
  });
}

// Set language and apply translations
async function setLanguage(lang) {
  currentLanguage = lang;
  applyTranslations();
}

// Make translation function globally accessible
window.t = t;
window.applyTranslations = applyTranslations;
window.setLanguage = setLanguage;

// ========================================
// Romantic Categories for Collection
// ========================================

// Define romantic subcategories with keywords for categorization
const ROMANTIC_CATEGORIES = {
  'passionate-dramas': {
    titleKey: 'collection.cat.passionateDramas',
    keywords: ['drama', 'passion', 'intense', 'emotional', 'heart', 'soul', 'deep', 'powerful', 'tragic'],
    icon: '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#e50914" stroke-width="2"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/><path d="M12 6v6l4 2" stroke="#ff6b9d"/></svg>',
    priority: 1
  },
  'star-crossed-lovers': {
    titleKey: 'collection.cat.starCrossedLovers',
    keywords: ['forbidden', 'impossible', 'star', 'crossed', 'fate', 'destiny', 'tragic', 'eternal', 'beyond', 'death'],
    icon: '<svg width="20" height="20" viewBox="0 0 24 24" fill="#e50914"><polygon points="12,2 15,9 22,9 17,14 19,22 12,17 5,22 7,14 2,9 9,9"/></svg>',
    priority: 2
  },
  'action-romance': {
    titleKey: 'collection.cat.actionRomance',
    keywords: ['action', 'adventure', 'hero', 'battle', 'fight', 'warrior', 'brave', 'courage', 'mission', 'rescue'],
    icon: '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#e50914" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/><path d="M12 8l3 3-3 3" stroke="#ff6b9d"/></svg>',
    priority: 3
  },
  'fantasy-love': {
    titleKey: 'collection.cat.fantasyLove',
    keywords: ['fantasy', 'magic', 'magical', 'enchant', 'mystical', 'fairy', 'dream', 'spell', 'wizard', 'supernatural'],
    icon: '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#e50914" stroke-width="2"><path d="M12 2L15 8L22 9L17 14L19 21L12 17L5 21L7 14L2 9L9 8L12 2Z"/><circle cx="12" cy="12" r="3" fill="#ff6b9d"/></svg>',
    priority: 4
  },
  'sci-fi-romance': {
    titleKey: 'collection.cat.sciFiRomance',
    keywords: ['space', 'star', 'galaxy', 'future', 'robot', 'alien', 'machine', 'cyber', 'tech', 'time'],
    icon: '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#e50914" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M8 12h8M12 8l4 4-4 4" stroke="#ff6b9d"/><circle cx="12" cy="12" r="2" fill="#e50914"/></svg>',
    priority: 5
  },
  'gothic-romance': {
    titleKey: 'collection.cat.gothicRomance',
    keywords: ['dark', 'night', 'shadow', 'gothic', 'mysterious', 'vampire', 'ghost', 'haunted', 'midnight', 'monster'],
    icon: '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#e50914" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/><path d="M12 17v-4M12 9h.01" stroke="#ff6b9d"/></svg>',
    priority: 6
  },
  'comedy-romance': {
    titleKey: 'collection.cat.comedyRomance',
    keywords: ['fun', 'funny', 'laugh', 'comedy', 'joy', 'playful', 'sweet', 'charming', 'delightful'],
    icon: '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#e50914" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><line x1="9" y1="9" x2="9.01" y2="9" stroke="#ff6b9d" stroke-width="3" stroke-linecap="round"/><line x1="15" y1="9" x2="15.01" y2="9" stroke="#ff6b9d" stroke-width="3" stroke-linecap="round"/></svg>',
    priority: 7
  },
  'classic-romance': {
    titleKey: 'collection.cat.classicRomance',
    keywords: ['classic', 'timeless', 'eternal', 'forever', 'true', 'pure', 'beautiful', 'hearts', 'love'],
    icon: '<svg width="20" height="20" viewBox="0 0 24 24" fill="#e50914"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/><path d="M12 8v5l3 3" stroke="white" stroke-width="1.5"/></svg>',
    priority: 8
  },
  'recently-added': {
    titleKey: 'collection.cat.recentlyAdded',
    keywords: [],
    icon: '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#e50914" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/><circle cx="12" cy="16" r="2" fill="#ff6b9d"/></svg>',
    priority: 0
  }
};

/**
 * Categorize a movie based on its title, summary, and tags
 * Returns an array of category keys that match
 */
function categorizeMovie(movie) {
  const categories = [];
  const searchText = `${movie.romanticTitle || ''} ${movie.romanticSummary || ''} ${(movie.tags || []).join(' ')} ${movie.originalTitle || ''}`.toLowerCase();
  
  for (const [categoryKey, category] of Object.entries(ROMANTIC_CATEGORIES)) {
    if (categoryKey === 'recently-added') continue; // Special category handled separately
    
    const matchCount = category.keywords.filter(keyword => searchText.includes(keyword.toLowerCase())).length;
    if (matchCount >= 1) {
      categories.push({ key: categoryKey, score: matchCount });
    }
  }
  
  // Sort by match score (descending) and return category keys
  categories.sort((a, b) => b.score - a.score);
  
  // Return at least 'classic-romance' if no matches
  if (categories.length === 0) {
    return ['classic-romance'];
  }
  
  // Return top 2 categories max (movie can appear in multiple rows)
  return categories.slice(0, 2).map(c => c.key);
}

/**
 * Group movies by romantic categories
 * Returns object with category keys and their movies
 */
function groupMoviesByCategory(movies) {
  const groups = {};
  
  // Initialize all categories
  for (const categoryKey of Object.keys(ROMANTIC_CATEGORIES)) {
    groups[categoryKey] = [];
  }
  
  // Add recently added (most recent 8 movies, no shuffling for this one)
  const recentMovies = [...movies].sort((a, b) => (b.id || 0) - (a.id || 0)).slice(0, 8);
  groups['recently-added'] = recentMovies;
  
  // Categorize each movie
  for (const movie of movies) {
    const movieCategories = categorizeMovie(movie);
    for (const categoryKey of movieCategories) {
      if (!groups[categoryKey].find(m => m.id === movie.id)) {
        groups[categoryKey].push(movie);
      }
    }
  }
  
  // Shuffle each category (except recently-added) to mix the order
  for (const categoryKey of Object.keys(groups)) {
    if (categoryKey !== 'recently-added') {
      groups[categoryKey] = shuffleArray(groups[categoryKey]);
    }
  }
  
  return groups;
}

/**
 * Shuffle array using Fisher-Yates algorithm
 */
function shuffleArray(array) {
  const shuffled = [...array];
  for (let i = shuffled.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
  }
  return shuffled;
}

/**
 * Get minimum movies required to show a category row
 * Depends on total collection size
 */
function getMinMoviesForCategory(totalMovies) {
  if (totalMovies <= 3) return 1;
  if (totalMovies <= 6) return 2;
  if (totalMovies <= 10) return 2;
  return 3;
}

// ========================================
// Navigation - Define globally before DOM loads
// ========================================

function showView(viewName) {
  // Update nav links
  document.querySelectorAll('.nav-link').forEach(link => {
    link.classList.toggle('active', link.dataset.view === viewName);
  });
  
  // Update views
  document.querySelectorAll('.view').forEach(view => {
    view.classList.remove('active');
  });
  document.getElementById(`${viewName}View`).classList.add('active');
  
  // Load data if needed
  if (viewName === 'top10') {
    loadTop10();
  } else if (viewName === 'collection') {
    loadCollection();
  }
}

// Make showView globally accessible
window.showView = showView;

// Initialize
document.addEventListener('DOMContentLoaded', async () => {
  // Load language setting first
  const settings = await window.api.getSettings();
  currentLanguage = settings.language || 'English';
  applyTranslations();
  
  initWindowControls();
  initNavigation();
  initSettings();
  initQuickLanguageSelector();
  initTransform();
  initTop10();
  initCollection();
  initModals();
  initAboutModal();
  initHomeButtons();
  initAutoUpdater();
  
  // Load initial data
  await loadCollection();
});

// ========================================
// Auto-Updater
// ========================================

let updateInfo = null;
let updateDownloadProgress = 0;

function initAutoUpdater() {
  // Listen for update available
  window.api.onUpdateAvailable((info) => {
    console.log('Update available:', info);
    updateInfo = info;
    showUpdateNotification(info);
  });

  // Listen for download progress
  window.api.onUpdateDownloadProgress((progress) => {
    console.log('Download progress:', progress.percent);
    updateDownloadProgress = progress.percent;
    updateDownloadProgressUI(progress);
  });

  // Listen for update downloaded
  window.api.onUpdateDownloaded((info) => {
    console.log('Update downloaded:', info);
    showUpdateReadyNotification(info);
  });

  // Listen for manual update checks
  window.api.onManualUpdateCheck(() => {
    checkForUpdatesManually();
  });
}

async function checkForUpdatesManually() {
  // Show checking notification
  const notification = document.createElement('div');
  notification.className = 'update-notification';
  notification.id = 'updateCheckNotification';
  notification.innerHTML = `
    <div class="update-content">
      <h3>ğŸ” Checking for Updates</h3>
      <p>Please wait...</p>
    </div>
  `;
  document.body.appendChild(notification);

  try {
    const result = await window.api.checkForUpdates();
    
    // Remove checking notification
    const checkNotif = document.getElementById('updateCheckNotification');
    if (checkNotif) {
      checkNotif.remove();
    }

    if (result.available === false) {
      // Show up-to-date notification
      const currentVersion = await window.api.getAppVersion();
      const upToDateNotif = document.createElement('div');
      upToDateNotif.className = 'update-notification';
      upToDateNotif.innerHTML = `
        <div class="update-content">
          <h3>âœ… You're Up to Date</h3>
          <p>ActionFlix ${currentVersion} is the latest version.</p>
          <div class="update-actions">
            <button class="btn-primary" onclick="dismissUpdate()">OK</button>
          </div>
        </div>
      `;
      document.body.appendChild(upToDateNotif);
      
      // Auto-dismiss after 3 seconds
      setTimeout(() => {
        if (upToDateNotif.parentNode) {
          upToDateNotif.remove();
        }
      }, 3000);
    }
  } catch (error) {
    console.error('Error checking for updates:', error);
    // Remove checking notification
    const checkNotif = document.getElementById('updateCheckNotification');
    if (checkNotif) {
      checkNotif.remove();
    }
  }
}

async function showUpdateNotification(info) {
  const currentVersion = await window.api.getAppVersion();
  const notification = document.createElement('div');
  notification.className = 'update-notification';
  notification.innerHTML = `
    <div class="update-content">
      <h3>ğŸ‰ Update Available</h3>
      <p>Version ${info.version} is available.</p>
      <p style="color: var(--text-secondary); font-size: 14px; margin-top: 4px;">Current version: ${currentVersion}</p>
      <div class="update-actions">
        <button class="btn-primary" onclick="downloadUpdate()">Download Update</button>
        <button class="btn-secondary" onclick="dismissUpdate()">Later</button>
      </div>
    </div>
  `;
  document.body.appendChild(notification);
}

function showUpdateReadyNotification(info) {
  const notification = document.createElement('div');
  notification.className = 'update-notification';
  notification.innerHTML = `
    <div class="update-content">
      <h3>âœ… Update Ready</h3>
      <p>Version ${info.version} has been downloaded and is ready to install.</p>
      <p class="update-note">Your settings and collections will be preserved.</p>
      <div class="update-actions">
        <button class="btn-primary" onclick="installUpdate()">Restart & Install</button>
        <button class="btn-secondary" onclick="dismissUpdate()">Install on Exit</button>
      </div>
    </div>
  `;
  document.body.appendChild(notification);
}

function updateDownloadProgressUI(progress) {
  const existingNotification = document.querySelector('.update-notification');
  if (existingNotification) {
    const content = existingNotification.querySelector('.update-content');
    let progressBar = content.querySelector('.update-progress');
    if (!progressBar) {
      progressBar = document.createElement('div');
      progressBar.className = 'update-progress';
      progressBar.innerHTML = `
        <div class="progress-bar">
          <div class="progress-fill" style="width: 0%"></div>
        </div>
        <span class="progress-text">0%</span>
      `;
      content.querySelector('.update-actions').before(progressBar);
    }
    const fill = progressBar.querySelector('.progress-fill');
    const text = progressBar.querySelector('.progress-text');
    fill.style.width = `${Math.round(progress.percent)}%`;
    text.textContent = `${Math.round(progress.percent)}%`;
  }
}

async function downloadUpdate() {
  console.log('Downloading update...');
  await window.api.downloadUpdate();
  const notification = document.querySelector('.update-notification');
  if (notification) {
    const content = notification.querySelector('.update-content');
    content.querySelector('h3').textContent = 'â¬‡ï¸ Downloading Update';
    content.querySelector('p').textContent = 'Please wait while the update is being downloaded...';
    const actions = content.querySelector('.update-actions');
    actions.style.display = 'none';
  }
}

async function installUpdate() {
  console.log('Installing update...');
  await window.api.installUpdate();
}

function dismissUpdate() {
  const notification = document.querySelector('.update-notification');
  if (notification) {
    notification.remove();
  }
}

// ========================================
// Window Controls
// ========================================

function initWindowControls() {
  document.getElementById('minimizeBtn').addEventListener('click', () => window.api.minimize());
  document.getElementById('maximizeBtn').addEventListener('click', () => window.api.maximize());
  document.getElementById('closeBtn').addEventListener('click', () => window.api.close());
}

// ========================================
// Home View Buttons
// ========================================

function initHomeButtons() {
  // Hero romanticize button
  const heroBtn = document.getElementById('heroRomanticizeBtn');
  if (heroBtn) {
    heroBtn.addEventListener('click', () => showView('transform'));
  }
  
  // Empty state romanticize button
  const emptyStateBtn = document.getElementById('emptyStateRomanticizeBtn');
  if (emptyStateBtn) {
    emptyStateBtn.addEventListener('click', () => showView('transform'));
  }
}

// ========================================
// Navigation Initialization
// ========================================

function initNavigation() {
  document.querySelectorAll('.nav-link').forEach(link => {
    link.addEventListener('click', (e) => {
      e.preventDefault();
      const view = link.dataset.view;
      showView(view);
    });
  });
}

// ========================================
// Quick Language Selector
// ========================================

async function initQuickLanguageSelector() {
  const quickLangSelect = document.getElementById('quickLanguageSelect');
  if (!quickLangSelect) return;
  
  // Set initial value from current language
  quickLangSelect.value = currentLanguage;
  
  // Handle language change
  quickLangSelect.addEventListener('change', async () => {
    const newLanguage = quickLangSelect.value;
    currentLanguage = newLanguage;
    applyTranslations();
    
    // Save to settings
    const settings = await window.api.getSettings();
    settings.language = newLanguage;
    await window.api.saveSettings(settings);
    
    // Sync with settings modal select if it exists
    const settingsLangSelect = document.getElementById('languageSelect');
    if (settingsLangSelect) {
      settingsLangSelect.value = newLanguage;
    }
  });
}

// Sync quick language selector when settings are saved
function syncQuickLanguageSelector(language) {
  const quickLangSelect = document.getElementById('quickLanguageSelect');
  if (quickLangSelect) {
    quickLangSelect.value = language;
  }
}

// ========================================
// Settings
// ========================================

function initSettings() {
  const settingsModal = document.getElementById('settingsModal');
  const settingsBtn = document.getElementById('settingsBtn');
  const closeSettingsBtn = document.getElementById('closeSettingsBtn');
  const cancelSettingsBtn = document.getElementById('cancelSettingsBtn');
  const saveSettingsBtn = document.getElementById('saveSettingsBtn');
  
  settingsBtn.addEventListener('click', async () => {
    const settings = await window.api.getSettings();
    document.getElementById('apiKeyInput').value = settings.apiKey || '';
    document.getElementById('imageModelSelect').value = settings.imageModel || 'dall-e-3';
    document.getElementById('textModelSelect').value = settings.textModel || 'gpt-5.2';
    document.getElementById('languageSelect').value = settings.language || 'English';
    document.getElementById('tmdbApiKeyInput').value = settings.tmdbApiKey || '';
    document.getElementById('countrySelect').value = settings.country || 'BE';
    
    // Show/hide environment key notice
    const envKeyNotice = document.getElementById('envKeyNotice');
    if (settings.hasEnvApiKey) {
      envKeyNotice.classList.remove('hidden');
      document.getElementById('apiKeyInput').placeholder = 'Using env variable (override by entering key here)';
    } else {
      envKeyNotice.classList.add('hidden');
      document.getElementById('apiKeyInput').placeholder = 'sk-...';
    }
    
    settingsModal.classList.remove('hidden');
  });
  
  closeSettingsBtn.addEventListener('click', () => settingsModal.classList.add('hidden'));
  cancelSettingsBtn.addEventListener('click', () => settingsModal.classList.add('hidden'));
  
  settingsModal.querySelector('.modal-overlay').addEventListener('click', () => {
    settingsModal.classList.add('hidden');
  });
  
  // Test TMDB API Key button
  const testTmdbBtn = document.getElementById('testTmdbBtn');
  const tmdbTestResult = document.getElementById('tmdbTestResult');
  
  testTmdbBtn.addEventListener('click', async () => {
    const apiKey = document.getElementById('tmdbApiKeyInput').value.trim();
    
    if (!apiKey) {
      tmdbTestResult.className = 'tmdb-test-result error';
      tmdbTestResult.textContent = 'âŒ Please enter an API key first';
      tmdbTestResult.classList.remove('hidden');
      return;
    }
    
    // Show testing state
    tmdbTestResult.className = 'tmdb-test-result testing';
    tmdbTestResult.textContent = 'â³ Testing API key...';
    tmdbTestResult.classList.remove('hidden');
    testTmdbBtn.disabled = true;
    
    try {
      const result = await window.api.testTmdbKey(apiKey);
      
      if (result.success) {
        tmdbTestResult.className = 'tmdb-test-result success';
        tmdbTestResult.textContent = 'âœ… ' + result.message;
      } else {
        tmdbTestResult.className = 'tmdb-test-result error';
        tmdbTestResult.textContent = 'âŒ ' + result.error;
      }
    } catch (error) {
      tmdbTestResult.className = 'tmdb-test-result error';
      tmdbTestResult.textContent = 'âŒ Test failed: ' + error.message;
    } finally {
      testTmdbBtn.disabled = false;
    }
  });
  
  saveSettingsBtn.addEventListener('click', async () => {
    const newTmdbKey = document.getElementById('tmdbApiKeyInput').value.trim();
    const oldSettings = await window.api.getSettings();
    
    // If TMDB key changed and is not empty, validate it first
    if (newTmdbKey && newTmdbKey !== oldSettings.tmdbApiKey) {
      tmdbTestResult.className = 'tmdb-test-result testing';
      tmdbTestResult.textContent = 'â³ Validating TMDB API key...';
      tmdbTestResult.classList.remove('hidden');
      
      const validationResult = await window.api.testTmdbKey(newTmdbKey);
      
      if (!validationResult.success) {
        tmdbTestResult.className = 'tmdb-test-result error';
        tmdbTestResult.textContent = 'âŒ ' + validationResult.error;
        showToast('Cannot save invalid TMDB API key');
        return;
      }
      
      tmdbTestResult.className = 'tmdb-test-result success';
      tmdbTestResult.textContent = 'âœ… TMDB API key validated';
    }
    
    const settings = {
      apiKey: document.getElementById('apiKeyInput').value,
      imageModel: document.getElementById('imageModelSelect').value,
      textModel: document.getElementById('textModelSelect').value,
      language: document.getElementById('languageSelect').value,
      tmdbApiKey: newTmdbKey,
      country: document.getElementById('countrySelect').value
    };
    
    await window.api.saveSettings(settings);
    
    // Apply language changes
    currentLanguage = settings.language;
    applyTranslations();
    
    // Sync quick language selector
    syncQuickLanguageSelector(settings.language);
    
    // If TMDB settings changed, reload Top 10
    if (newTmdbKey !== oldSettings.tmdbApiKey || settings.country !== oldSettings.country) {
      // Reload Top 10 if currently on that view
      const top10View = document.getElementById('top10View');
      if (top10View.classList.contains('active')) {
        await loadTop10();
      }
    }
    
    settingsModal.classList.add('hidden');
    showToast(t('toast.settingsSaved'));
  });
}

// ========================================
// Transform
// ========================================

function initTransform() {
  const transformBtn = document.getElementById('transformBtn');
  const movieTitleInput = document.getElementById('movieTitleInput');
  const saveToCollectionBtn = document.getElementById('saveToCollectionBtn');
  const regenerateBtn = document.getElementById('regenerateBtn');
  
  transformBtn.addEventListener('click', () => transformMovie());
  
  movieTitleInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') transformMovie();
  });
  
  saveToCollectionBtn.addEventListener('click', saveCurrentMovie);
  regenerateBtn.addEventListener('click', () => transformMovie());
}

async function transformMovie() {
  const movieTitle = document.getElementById('movieTitleInput').value.trim();
  
  if (!movieTitle) {
    showToast(t('toast.enterTitle'));
    return;
  }
  
  const transformBtn = document.getElementById('transformBtn');
  const resultSection = document.getElementById('transformResult');
  const posterLoading = document.querySelector('.poster-loading');
  const posterImg = document.getElementById('resultPoster');
  const progressContainer = document.getElementById('transformProgress');
  
  // Clear previous results
  resultSection.classList.add('hidden');
  currentMovieData = null;
  
  // Show progress bar and reset all steps
  progressContainer.classList.remove('hidden');
  resetProgressBar();
  
  // Disable button and show loading
  transformBtn.disabled = true;
  transformBtn.innerHTML = `<span class="loading-spinner"></span> ${t('transform.romanticizing')}`;
  
  try {
    // Step 1: Get movie info
    updateProgressBar(1);
    showToast(t('toast.fetchingMovie'));
    const movieInfo = await window.api.getMovieInfo(movieTitle);
    
    // Step 2: Actionize title
    updateProgressBar(2);
    showToast('Creating action-packed title...');
    
    // Step 3: Actionize summary
    updateProgressBar(3);
    showToast('Creating action-packed story...');
    
    const actionized = await window.api.romanticizeMovie({
      title: movieTitle,
      summary: movieInfo.summary || `A movie titled "${movieTitle}"`
    });
    
    console.log('Actionize result:', JSON.stringify(actionized, null, 2));
    console.log('Movie info:', JSON.stringify(movieInfo, null, 2));
    
    // Generate tags based on action content
    const tags = await window.api.generateTags({
      romanticTitle: actionized.romanticTitle,
      romanticSummary: actionized.romanticSummary,
      genre: movieInfo.genre || ''
    });
    
    console.log('Generated tags:', tags);
    
    // Store current movie data
    currentMovieData = {
      id: Date.now(),
      originalTitle: movieTitle,
      romanticTitle: actionized.romanticTitle,
      romanticSummary: actionized.romanticSummary,
      tags: tags || ['Action', 'Explosions', 'AI Generated'],
      posterUrl: null
    };
    
    // Show results section with text
    resultSection.classList.remove('hidden');
    document.getElementById('originalTitle').textContent = movieTitle;
    document.getElementById('romanticTitle').textContent = romantic.romanticTitle;
    document.getElementById('romanticSummary').textContent = romantic.romanticSummary;
    
    // Show poster loading state
    posterLoading.classList.remove('hidden');
    posterImg.style.display = 'none';
    
    // Step 4: Generate poster with all available context
    updateProgressBar(4);
    showToast(t('toast.creatingPoster'));
    console.log('Calling generatePoster with:', {
      originalTitle: movieTitle,
      romanticTitle: romantic.romanticTitle,
      genre: movieInfo.genre,
      originalSummary: movieInfo.summary
    });
    
    const posterUrl = await window.api.generatePoster({
      originalTitle: movieTitle,
      romanticTitle: romantic.romanticTitle,
      genre: movieInfo.genre || '',
      originalSummary: movieInfo.summary || ''
    });
    
    console.log('Received poster response:', posterUrl);
    
    // Handle both old format (string) and new format (object with url and style)
    let actualPosterUrl;
    let posterStyle = null;
    
    if (typeof posterUrl === 'object' && posterUrl.url) {
      // New format with style information
      actualPosterUrl = posterUrl.url;
      posterStyle = posterUrl.style;
      if (posterStyle) {
        console.log('Poster generated in style:', posterStyle);
        console.log('Style details:', posterUrl.styleDetails);
      }
    } else {
      // Old format or fallback (just a URL string)
      actualPosterUrl = posterUrl;
    }
    
    if (!actualPosterUrl || actualPosterUrl === 'undefined') {
      throw new Error('Failed to generate poster - no URL returned');
    }
    
    currentMovieData.posterUrl = actualPosterUrl;
    if (posterStyle) {
      currentMovieData.posterStyle = posterStyle;
      currentMovieData.posterStyleDetails = posterUrl.styleDetails;
    }
    
    // Show poster
    posterImg.src = actualPosterUrl;
    posterImg.style.display = 'block';
    posterLoading.classList.add('hidden');
    
    // All steps completed
    completeProgressBar();
    showToast(t('toast.transformComplete'));
    
    // Hide progress bar after a short delay
    setTimeout(() => {
      progressContainer.classList.add('hidden');
    }, 2000);
    
  } catch (error) {
    progressContainer.classList.add('hidden');
    showToast(`Error: ${error.message}`);
    console.error(error);
  } finally {
    transformBtn.disabled = false;
    transformBtn.innerHTML = `<span>${t('transform.romanticize')}</span><span class="loading-spinner hidden"></span>`;
  }
}

function resetProgressBar() {
  const steps = document.querySelectorAll('.progress-step');
  steps.forEach(step => {
    step.classList.remove('active', 'completed');
  });
  
  const progressFill = document.querySelector('.progress-bar-fill');
  progressFill.style.width = '0%';
}

function updateProgressBar(currentStep) {
  const steps = document.querySelectorAll('.progress-step');
  const progressFill = document.querySelector('.progress-bar-fill');
  
  // Mark previous steps as completed
  steps.forEach((step, index) => {
    const stepNumber = index + 1;
    if (stepNumber < currentStep) {
      step.classList.remove('active');
      step.classList.add('completed');
    } else if (stepNumber === currentStep) {
      step.classList.remove('completed');
      step.classList.add('active');
    } else {
      step.classList.remove('active', 'completed');
    }
  });
  
  // Update progress bar fill
  const progress = ((currentStep - 1) / 3) * 100; // 3 gaps between 4 steps
  progressFill.style.width = `${progress}%`;
}

function completeProgressBar() {
  const steps = document.querySelectorAll('.progress-step');
  steps.forEach(step => {
    step.classList.remove('active');
    step.classList.add('completed');
  });
  
  const progressFill = document.querySelector('.progress-bar-fill');
  progressFill.style.width = '100%';
}

async function saveCurrentMovie() {
  if (!currentMovieData) {
    showToast(t('toast.noMovieToSave'));
    return;
  }
  
  await window.api.saveMovie(currentMovieData);
  showToast(t('toast.savedToCollection'));
}

// ========================================
// Top 10
// ========================================

// Store loaded top 10 data for romanticize all functionality
let top10Data = null;

function initTop10() {
  // Initialize scroll buttons for all rows
  document.querySelectorAll('.top10-row').forEach(row => {
    const slider = row.querySelector('.top10-slider');
    const leftBtn = row.querySelector('.scroll-left');
    const rightBtn = row.querySelector('.scroll-right');
    
    if (leftBtn && slider) {
      leftBtn.addEventListener('click', () => {
        slider.scrollBy({ left: -400, behavior: 'smooth' });
      });
    }
    
    if (rightBtn && slider) {
      rightBtn.addEventListener('click', () => {
        slider.scrollBy({ left: 400, behavior: 'smooth' });
      });
    }
  });
  
  // Event delegation for romanticize buttons
  document.querySelectorAll('.top10-slider').forEach(slider => {
    slider.addEventListener('click', (e) => {
      const romanticizeBtn = e.target.closest('.btn-romanticize');
      if (romanticizeBtn) {
        e.stopPropagation();
        const card = romanticizeBtn.closest('.top10-card');
        if (card) {
          const title = card.dataset.title;
          romanticizeTop10Movie(title);
        }
      }
    });
  });
  
  // Event delegation for "Romanticize All" buttons
  document.querySelectorAll('.btn-romanticize-all').forEach(btn => {
    btn.addEventListener('click', (e) => {
      const category = btn.dataset.category;
      console.log('Romanticize All clicked for category:', category);
      console.log('top10Data:', top10Data);
      console.log('top10Data[category]:', top10Data ? top10Data[category] : 'top10Data is null');
      
      if (category && top10Data && top10Data[category]) {
        console.log('Starting romanticizeAllTop10 with', top10Data[category].length, 'movies');
        romanticizeAllTop10(category, top10Data[category]);
      } else {
        console.error('Cannot start romanticizeAllTop10:', {
          hasCategory: !!category,
          hasTop10Data: !!top10Data,
          hasCategoryData: !!(top10Data && top10Data[category]),
          categoryData: top10Data ? top10Data[category] : null
        });
        showToast('âŒ No movies loaded for this category. Please try refreshing.');
      }
    });
  });
}

async function loadTop10() {
  try {
    const allTop10 = await window.api.getAllTop10();
    
    // Check for error (e.g., missing TMDB API key)
    if (allTop10.movies && allTop10.movies.error) {
      showToast(allTop10.movies.error);
      return;
    }
    
    // Check if we're using fallback data
    const usingFallback = allTop10.movies?.usingFallback || 
                         allTop10.series?.usingFallback || 
                         allTop10.action?.usingFallback || 
                         allTop10.scifi?.usingFallback;
    
    if (usingFallback) {
      showFallbackNotice();
    } else {
      hideFallbackNotice();
    }
    
    // Store the data for romanticize all functionality
    // Normalize the data structure to always have the movies array directly
    top10Data = {
      movies: allTop10.movies?.data || allTop10.movies,
      series: allTop10.series?.data || allTop10.series,
      action: allTop10.action?.data || allTop10.action,
      scifi: allTop10.scifi?.data || allTop10.scifi
    };
    
    console.log('Top10 data loaded:', top10Data);
    
    // Render each category
    renderTop10Row('top10MoviesSlider', top10Data.movies);
    renderTop10Row('top10SeriesSlider', top10Data.series);
    renderTop10Row('top10ActionSlider', top10Data.action);
    renderTop10Row('top10SciFiSlider', top10Data.scifi);
    
  } catch (error) {
    console.error(error);
    showToast(t('toast.failedToLoadTop10'));
  }
}

function showFallbackNotice() {
  let notice = document.querySelector('.fallback-notice');
  if (!notice) {
    notice = document.createElement('div');
    notice.className = 'fallback-notice';
    notice.innerHTML = `
      <span style="font-size: 20px;">â„¹ï¸</span>
      <span>You're viewing sample Top 10 data. Add your TMDB API key in Settings to see real-time popular content from your region.</span>
    `;
    const top10Container = document.querySelector('.top10-container');
    if (top10Container && top10Container.firstChild) {
      top10Container.insertBefore(notice, top10Container.firstChild);
    }
  }
  notice.style.display = 'flex';
}

function hideFallbackNotice() {
  const notice = document.querySelector('.fallback-notice');
  if (notice) {
    notice.style.display = 'none';
  }
}

function renderTop10Row(sliderId, items) {
  const slider = document.getElementById(sliderId);
  if (!slider) return;
  
  // Check if items has an error
  if (items && items.error) {
    slider.innerHTML = `<div style="padding: 20px; color: #999; text-align: center;">${items.error}</div>`;
    return;
  }
  
  if (!Array.isArray(items) || items.length === 0) {
    slider.innerHTML = `<div style="padding: 20px; color: #999; text-align: center;">No movies available</div>`;
    return;
  }
  
  slider.innerHTML = items.map((item, index) => `
    <div class="top10-card" data-title="${item.title}">
      <div class="top10-rank">${index + 1}</div>
      <div class="top10-poster-container">
        <img 
          src="${item.poster}" 
          alt="${item.title}" 
          class="top10-poster-img"
          onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22200%22 height=%22300%22><rect fill=%22%23232323%22 width=%22200%22 height=%22300%22/><text fill=%22%23666%22 x=%2250%%22 y=%2250%%22 text-anchor=%22middle%22>No Image</text></svg>'"
        >
        <div class="top10-hover-overlay">
          <div class="top10-hover-info">
            <h4 class="top10-hover-title">${item.title}</h4>
            <p class="top10-hover-meta">${item.year} â€¢ ${item.genre}</p>
            <button class="btn-romanticize">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
              </svg>
              ${t('top10.romanticize')}
            </button>
          </div>
        </div>
      </div>
    </div>
  `).join('');
}

async function romanticizeTop10Movie(title) {
  document.getElementById('movieTitleInput').value = title;
  showView('transform');
  await transformMovie();
}

// Make globally accessible
window.romanticizeTop10Movie = romanticizeTop10Movie;

// Genre name mapping from original to romantic version
const romanticGenreNames = {
  movies: 'top10.romanticGenre.movies',
  series: 'top10.romanticGenre.series',
  action: 'top10.romanticGenre.action',
  scifi: 'top10.romanticGenre.scifi'
};

// Romanticize all 10 movies in a category
async function romanticizeAllTop10(category, movies) {
  const btn = document.querySelector(`.btn-romanticize-all[data-category="${category}"]`);
  if (!btn) return;
  
  // Disable button
  btn.disabled = true;
  const originalContent = btn.innerHTML;
  btn.innerHTML = `<span class="loading-spinner"></span> ${t('top10.romanticizing')}`;
  
  // Show progress modal
  const modal = showRomanticizeAllProgress(category, movies.length);
  
  const romanticizedMovies = [];
  const collectionId = `top10-${category}-${Date.now()}`;
  
  try {
    for (let i = 0; i < movies.length; i++) {
      const movie = movies[i];
      
      // Update progress modal
      updateRomanticizeAllProgress(modal, i + 1, movies.length, movie.title, 'info');
      
      try {
        // Get movie info
        console.log(`[${i + 1}/${movies.length}] Processing: ${movie.title}`);
        const movieInfo = await window.api.getMovieInfo(movie.title);
        console.log(`[${i + 1}/${movies.length}] Movie info received:`, movieInfo);
        updateRomanticizeAllProgress(modal, i + 1, movies.length, movie.title, 'title');
        
        // Romanticize the movie
        const romantic = await window.api.romanticizeMovie({
          title: movie.title,
          summary: movieInfo.summary || `A ${movie.genre} movie titled "${movie.title}"`
        });
        console.log(`[${i + 1}/${movies.length}] Romanticized:`, romantic);
        
        if (!romantic || !romantic.romanticTitle) {
          throw new Error('No romantic title received from API');
        }
        
        updateRomanticizeAllProgress(modal, i + 1, movies.length, movie.title, 'story');
        
        // Generate tags
        const tags = await window.api.generateTags({
          romanticTitle: romantic.romanticTitle,
          romanticSummary: romantic.romanticSummary,
          genre: movie.genre || movieInfo.genre || ''
        });
        console.log(`[${i + 1}/${movies.length}] Tags generated:`, tags);
        
        // Generate poster
        updateRomanticizeAllProgress(modal, i + 1, movies.length, movie.title, 'poster');
        const posterResponse = await window.api.generatePoster({
          originalTitle: movie.title,
          romanticTitle: romantic.romanticTitle,
          genre: movie.genre || '',
          originalSummary: movieInfo.summary || ''
        });
        console.log(`[${i + 1}/${movies.length}] Poster response:`, posterResponse);
        
        // Handle both old format (string) and new format (object with url and style)
        let posterUrl;
        let posterStyle = null;
        
        if (typeof posterResponse === 'object' && posterResponse.url) {
          // New format with style information
          posterUrl = posterResponse.url;
          posterStyle = posterResponse.style;
          if (posterStyle) {
            console.log(`[${i + 1}/${movies.length}] Poster style: ${posterStyle}`);
          }
        } else {
          // Old format or fallback (just a URL string)
          posterUrl = posterResponse;
        }
        
        // Create movie data
        const movieData = {
          id: `${collectionId}-${i}`,
          originalTitle: movie.title,
          romanticTitle: romantic.romanticTitle,
          romanticSummary: romantic.romanticSummary,
          tags: tags || ['Romance', 'Love Story', 'AI Generated'],
          posterUrl: posterUrl,
          year: movie.year,
          originalGenre: movie.genre,
          rank: i + 1
        };
        
        // Add style info if available
        if (posterStyle) {
          movieData.posterStyle = posterStyle;
          if (posterResponse.styleDetails) {
            movieData.posterStyleDetails = posterResponse.styleDetails;
          }
        }
        
        romanticizedMovies.push(movieData);
        
        // Save to collection immediately (so progress is saved)
        await window.api.saveMovie(movieData);
        console.log(`[${i + 1}/${movies.length}] Saved successfully!`);
        updateRomanticizeAllProgress(modal, i + 1, movies.length, movie.title, 'complete');
        
      } catch (error) {
        console.error(`[${i + 1}/${movies.length}] FAILED to romanticize "${movie.title}":`, error);
        console.error('Error details:', {
          message: error.message,
          stack: error.stack,
          movie: movie
        });
        updateRomanticizeAllProgress(modal, i + 1, movies.length, movie.title, 'error');
        
        // Show error toast for first failure
        if (i === 0) {
          showToast(`âš ï¸ Error: ${error.message}`, 5000);
        }
        
        // Continue with next movie even if one fails
        const fallbackMovie = {
          id: `${collectionId}-${i}`,
          originalTitle: movie.title,
          romanticTitle: `Romantic ${movie.title}`,
          romanticSummary: 'A romantic transformation awaits...',
          posterUrl: null,
          year: movie.year,
          originalGenre: movie.genre,
          rank: i + 1,
          failed: true
        };
        romanticizedMovies.push(fallbackMovie);
        await window.api.saveMovie(fallbackMovie);
      }
    }
    
    // Save the top 10 collection metadata
    const top10Collection = {
      id: collectionId,
      type: 'top10Collection',
      category: category,
      romanticGenreName: t(romanticGenreNames[category]) || t('top10.romanticGenre.movies'),
      movieIds: romanticizedMovies.map(m => m.id),
      createdAt: Date.now()
    };
    
    await window.api.saveTop10Collection(top10Collection);
    
    // Show completion message
    updateRomanticizeAllProgress(modal, movies.length, movies.length, '', 'done');
    
    // Wait a moment then close modal and navigate
    setTimeout(() => {
      closeRomanticizeAllProgress(modal);
      showToast(`ğŸ¬ ${t('toast.savedToCollection')} (${romanticizedMovies.length} movies)`);
      // Navigate to collection view and reload
      showView('collection');
      // Re-enable button
      btn.disabled = false;
      btn.innerHTML = originalContent;
    }, 2000);
    
  } catch (error) {
    console.error('Error in romanticizeAllTop10:', error);
    closeRomanticizeAllProgress(modal);
    showToast(`âŒ Error: ${error.message}`);
    
    // Restore button state
    btn.disabled = false;
    btn.innerHTML = originalContent;
  }
}

// Show progress modal for romanticize all
function showRomanticizeAllProgress(category, totalMovies) {
  // Create modal overlay
  const modal = document.createElement('div');
  modal.className = 'romanticize-all-modal';
  modal.innerHTML = `
    <div class="romanticize-all-modal-content">
      <div class="romanticize-all-header">
        <h3>ğŸ’ Romanticizing Top 10 ${category.charAt(0).toUpperCase() + category.slice(1)}</h3>
      </div>
      <div class="romanticize-all-progress">
        <div class="romanticize-all-progress-bar">
          <div class="romanticize-all-progress-fill" style="width: 0%"></div>
        </div>
        <div class="romanticize-all-progress-text">Starting...</div>
      </div>
      <div class="romanticize-all-current">
        <div class="romanticize-all-current-title"></div>
        <div class="romanticize-all-current-step"></div>
      </div>
      <div class="romanticize-all-movies-list">
        ${Array(totalMovies).fill(0).map((_, i) => `
          <div class="romanticize-all-movie-item" data-index="${i}">
            <span class="movie-status-icon">â³</span>
            <span class="movie-title">Movie ${i + 1}</span>
          </div>
        `).join('')}
      </div>
    </div>
  `;
  document.body.appendChild(modal);
  
  // Trigger animation
  setTimeout(() => modal.classList.add('show'), 10);
  
  return modal;
}

// Update progress modal
function updateRomanticizeAllProgress(modal, currentMovie, totalMovies, movieTitle, step) {
  const progressFill = modal.querySelector('.romanticize-all-progress-fill');
  const progressText = modal.querySelector('.romanticize-all-progress-text');
  const currentTitle = modal.querySelector('.romanticize-all-current-title');
  const currentStep = modal.querySelector('.romanticize-all-current-step');
  const movieItem = modal.querySelector(`.romanticize-all-movie-item[data-index="${currentMovie - 1}"]`);
  
  // Update progress bar
  const percentage = ((currentMovie - 1) / totalMovies) * 100;
  progressFill.style.width = `${percentage}%`;
  progressText.textContent = `${currentMovie} of ${totalMovies} movies`;
  
  // Update current movie info
  currentTitle.textContent = movieTitle;
  
  // Update step description
  const stepDescriptions = {
    'info': 'ğŸ“‹ Fetching movie information...',
    'title': 'âœï¸ Creating action-packed title...',
    'story': 'ğŸ“– Writing explosive story...',
    'poster': 'ğŸ¨ Generating action poster...',
    'complete': 'âœ… Complete!',
    'error': 'âŒ Error (continuing with next)',
    'done': 'ğŸ‰ All movies actionized!'
  };
  currentStep.textContent = stepDescriptions[step] || '';
  
  // Update movie item in list
  if (movieItem) {
    const statusIcon = movieItem.querySelector('.movie-status-icon');
    const titleSpan = movieItem.querySelector('.movie-title');
    titleSpan.textContent = movieTitle || `Movie ${currentMovie}`;
    
    if (step === 'complete') {
      statusIcon.textContent = 'âœ…';
      movieItem.classList.add('completed');
    } else if (step === 'error') {
      statusIcon.textContent = 'âŒ';
      movieItem.classList.add('error');
    } else if (step === 'info') {
      statusIcon.textContent = 'â³';
      movieItem.classList.add('processing');
    }
  }
  
  // Handle completion
  if (step === 'done') {
    progressFill.style.width = '100%';
    currentTitle.textContent = 'Collection saved!';
    currentStep.textContent = 'ğŸ‰ All movies have been actionized and saved to your collection!';
  }
}

// Close progress modal
function closeRomanticizeAllProgress(modal) {
  modal.classList.remove('show');
  setTimeout(() => {
    if (modal && modal.parentNode) {
      modal.parentNode.removeChild(modal);
    }
  }, 300);
}

// Make globally accessible
window.romanticizeAllTop10 = romanticizeAllTop10;

// ========================================
// Collection
// ========================================

function initCollection() {
  const deleteBtn = document.getElementById('deleteFromCollectionBtn');
  deleteBtn.addEventListener('click', deleteSelectedMovie);
  
  // Hero button event listeners
  const heroPlayBtn = document.getElementById('heroPlayBtn');
  const heroInfoBtn = document.getElementById('heroInfoBtn');
  
  if (heroPlayBtn) {
    heroPlayBtn.addEventListener('click', () => {
      const originalTitle = heroPlayBtn.dataset.originalTitle;
      if (originalTitle) {
        const netflixUrl = `https://www.netflix.com/search?q=${encodeURIComponent(originalTitle)}`;
        window.api.openExternal(netflixUrl);
        showToast('ğŸ¬ Opening Netflix search...');
      }
    });
  }
  
  if (heroInfoBtn) {
    heroInfoBtn.addEventListener('click', () => {
      const movieId = heroInfoBtn.dataset.movieId;
      if (movieId) {
        showMovieDetail(movieId);
      }
    });
  }
  
  // Event delegation for categorized movies container
  const categorizedContainer = document.getElementById('categorizedMoviesContainer');
  if (categorizedContainer) {
    categorizedContainer.addEventListener('click', (e) => {
      // Check if delete button was clicked
      const deleteBtn = e.target.closest('[data-action="delete"]');
      if (deleteBtn) {
        e.stopPropagation();
        const movieId = deleteBtn.dataset.movieId;
        deleteMovieFromCollection(movieId);
        return;
      }
      
      // Check if Netflix link was clicked
      const netflixBtn = e.target.closest('[data-action="netflix"]');
      if (netflixBtn) {
        e.preventDefault();
        e.stopPropagation();
        const url = netflixBtn.getAttribute('href');
        window.api.openExternal(url);
        return;
      }
      
      // Check if category card was clicked
      const categoryCard = e.target.closest('.category-movie-card');
      if (categoryCard) {
        const movieId = categoryCard.dataset.movieId;
        showMovieDetail(movieId);
      }
    });
  }
  
  // Event delegation for collection grid (legacy)
  const grid = document.getElementById('collectionGrid');
  grid.addEventListener('click', (e) => {
    // Check if delete button was clicked
    const deleteBtn = e.target.closest('[data-action="delete"]');
    if (deleteBtn) {
      e.stopPropagation();
      const movieId = deleteBtn.dataset.movieId;
      deleteMovieFromCollection(movieId);
      return;
    }
    
    // Check if Netflix link was clicked
    const netflixBtn = e.target.closest('[data-action="netflix"]');
    if (netflixBtn) {
      e.preventDefault();
      e.stopPropagation();
      const url = netflixBtn.getAttribute('href');
      window.api.openExternal(url);
      return;
    }
    
    // Check if collection item was clicked (for showing details)
    const collectionItem = e.target.closest('.collection-item');
    if (collectionItem) {
      const movieId = collectionItem.dataset.movieId;
      showMovieDetail(movieId);
    }
  });
}

async function loadCollection() {
  const grid = document.getElementById('collectionGrid');
  const emptyState = document.getElementById('emptyCollection');
  const romanticTop10Container = document.getElementById('romanticTop10Container');
  const categorizedContainer = document.getElementById('categorizedMoviesContainer');
  const collectionHero = document.getElementById('collectionHero');
  
  try {
    const movies = await window.api.getSavedMovies();
    const top10Collections = await window.api.getTop10Collections();
    
    // Separate top 10 collection movies from individual movies
    const top10MovieIds = new Set();
    top10Collections.forEach(collection => {
      collection.movieIds.forEach(id => top10MovieIds.add(id));
    });
    
    const top10Movies = movies.filter(m => top10MovieIds.has(m.id));
    // Allow all movies (including Top 10) to appear in romantic categories
    const allMoviesForCategories = movies;
    
    // Check if we have any movies at all
    const hasAnyMovies = movies.length > 0;
    
    if (!hasAnyMovies) {
      // Show empty state
      collectionHero.classList.add('hidden');
      romanticTop10Container.classList.add('hidden');
      categorizedContainer.innerHTML = '';
      grid.classList.add('hidden');
      emptyState.classList.remove('hidden');
      return;
    }
    
    // Hide empty state
    emptyState.classList.add('hidden');
    grid.classList.add('hidden'); // Hide legacy grid
    
    // === HERO SECTION ===
    // Pick a highlighted movie (most recent with poster, or random from collection)
    const moviesWithPosters = movies.filter(m => m.posterUrl);
    let heroMovie = null;
    
    if (moviesWithPosters.length > 0) {
      // Pick a random movie with poster for variety, or the most recent
      const randomIndex = Math.floor(Math.random() * Math.min(5, moviesWithPosters.length));
      heroMovie = moviesWithPosters[randomIndex];
    } else if (movies.length > 0) {
      heroMovie = movies[0];
    }
    
    if (heroMovie) {
      renderCollectionHero(heroMovie);
      collectionHero.classList.remove('hidden');
    } else {
      collectionHero.classList.add('hidden');
    }
    
    // === TOP 10 COLLECTIONS ===
    if (top10Collections.length > 0) {
      romanticTop10Container.classList.remove('hidden');
      renderRomanticTop10Collections(top10Collections, top10Movies);
    } else {
      romanticTop10Container.classList.add('hidden');
    }
    
    // === CATEGORIZED MOVIES (including Top 10) ===
    if (allMoviesForCategories.length > 0) {
      renderCategorizedMovies(allMoviesForCategories);
    } else {
      categorizedContainer.innerHTML = '';
    }
    
  } catch (error) {
    console.error(error);
    showToast(t('toast.failedToLoadCollection'));
  }
}

/**
 * Render the hero/featured movie section
 */
function renderCollectionHero(movie) {
  const heroBackdropImg = document.getElementById('heroBackdropImg');
  const heroRomanticTitle = document.getElementById('heroRomanticTitle');
  const heroOriginalTitle = document.getElementById('heroOriginalTitle');
  const heroSummary = document.getElementById('heroSummary');
  const heroTags = document.getElementById('heroTags');
  const heroPlayBtn = document.getElementById('heroPlayBtn');
  const heroInfoBtn = document.getElementById('heroInfoBtn');
  
  // Set backdrop image
  if (movie.posterUrl) {
    heroBackdropImg.src = movie.posterUrl;
    heroBackdropImg.alt = movie.romanticTitle;
  }
  
  // Set title and info
  heroRomanticTitle.textContent = movie.romanticTitle;
  heroOriginalTitle.innerHTML = `<span data-i18n="collection.originally">${t('collection.originally')}</span>: ${movie.originalTitle}`;
  
  // Truncate summary for hero
  const maxSummaryLength = 200;
  const summary = movie.romanticSummary || '';
  heroSummary.textContent = summary.length > maxSummaryLength 
    ? summary.substring(0, maxSummaryLength) + '...' 
    : summary;
  
  // Set tags
  const tags = movie.tags && movie.tags.length > 0 
    ? movie.tags.slice(0, 4) 
    : ['Romance', 'Love Story'];
  heroTags.innerHTML = tags.map(tag => `<span class="hero-tag">${tag}</span>`).join('');
  
  // Set button data attributes
  heroPlayBtn.dataset.originalTitle = movie.originalTitle;
  heroInfoBtn.dataset.movieId = movie.id;
}

/**
 * Render categorized movie rows (Netflix style)
 */
function renderCategorizedMovies(movies) {
  const container = document.getElementById('categorizedMoviesContainer');
  
  // Group movies by category
  const groups = groupMoviesByCategory(movies);
  const minMovies = getMinMoviesForCategory(movies.length);
  
  // Sort categories: first by movie count (descending), then by priority (ascending)
  const sortedCategories = Object.entries(ROMANTIC_CATEGORIES)
    .filter(([key, cat]) => {
      const categoryMovies = groups[key] || [];
      // Show 'recently-added' only if we have more than 3 movies total
      if (key === 'recently-added') {
        return movies.length > 3 && categoryMovies.length >= 1;
      }
      return categoryMovies.length >= minMovies;
    })
    .map(([key, cat]) => {
      const categoryMovies = groups[key] || [];
      return {
        key,
        category: cat,
        movieCount: categoryMovies.length,
        movies: categoryMovies
      };
    })
    .sort((a, b) => {
      // Sort by movie count (descending) - categories with more movies appear first
      if (b.movieCount !== a.movieCount) {
        return b.movieCount - a.movieCount;
      }
      // If same movie count, sort by priority
      return a.category.priority - b.category.priority;
    });
  
  // Render category rows
  container.innerHTML = sortedCategories.map(({ key: categoryKey, category, movies: categoryMovies }) => {
    const categoryTitle = t(category.titleKey) || categoryKey;
    
    return `
      <div class="category-row" data-category="${categoryKey}">
        <div class="category-row-header">
          <h3 class="category-row-title">
            <span class="category-icon">${category.icon}</span>
            <span>${categoryTitle}</span>
            <span class="category-count">(${categoryMovies.length})</span>
          </h3>
        </div>
        <div class="category-row-content">
          <button class="category-scroll-btn scroll-left" data-direction="left">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M15 18l-6-6 6-6"/>
            </svg>
          </button>
          <div class="category-slider">
            ${categoryMovies.map(movie => renderCategoryMovieCard(movie)).join('')}
          </div>
          <button class="category-scroll-btn scroll-right" data-direction="right">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 18l6-6-6-6"/>
            </svg>
          </button>
        </div>
      </div>
    `;
  }).join('');
  
  // Initialize scroll buttons
  container.querySelectorAll('.category-row').forEach(row => {
    const slider = row.querySelector('.category-slider');
    const leftBtn = row.querySelector('.scroll-left');
    const rightBtn = row.querySelector('.scroll-right');
    
    if (leftBtn && slider) {
      leftBtn.addEventListener('click', () => {
        slider.scrollBy({ left: -400, behavior: 'smooth' });
      });
    }
    
    if (rightBtn && slider) {
      rightBtn.addEventListener('click', () => {
        slider.scrollBy({ left: 400, behavior: 'smooth' });
      });
    }
  });
}

/**
 * Render a single movie card for category rows
 */
function renderCategoryMovieCard(movie) {
  return `
    <div class="category-movie-card" data-movie-id="${movie.id}">
      <button class="card-delete-btn" data-action="delete" data-movie-id="${movie.id}" title="${t('detail.removeFromCollection')}">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="3 6 5 6 21 6"></polyline>
          <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
        </svg>
      </button>
      <a href="https://www.netflix.com/search?q=${encodeURIComponent(movie.originalTitle)}" 
         class="card-netflix-btn" 
         data-action="netflix" 
         title="Watch on Netflix"
         target="_blank">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polygon points="5 3 19 12 5 21 5 3"></polygon>
        </svg>
      </a>
      <div class="card-poster">
        ${movie.posterUrl 
          ? `<img src="${movie.posterUrl}" alt="${movie.romanticTitle}" loading="lazy">`
          : `<div class="card-poster-placeholder">
              <svg width="40" height="40" viewBox="0 0 24 24" fill="#e50914" stroke="#e50914" stroke-width="2">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
              </svg>
            </div>`
        }
      </div>
      <div class="card-hover-info">
        <h4 class="card-title">${movie.romanticTitle}</h4>
        <p class="card-original">${movie.originalTitle}</p>
      </div>
    </div>
  `;
}

function renderRomanticTop10Collections(collections, movies) {
  const container = document.getElementById('romanticTop10Container');
  
  container.innerHTML = collections.map(collection => {
    // Get movies for this collection
    const collectionMovies = collection.movieIds
      .map(id => movies.find(m => m.id === id))
      .filter(m => m)
      .sort((a, b) => (a.rank || 0) - (b.rank || 0));
    
    // Get the romantic genre name
    const romanticGenreName = collection.romanticGenreName || t(romanticGenreNames[collection.category]) || t('top10.romanticGenre.movies');
    
    return `
      <div class="top10-category romantic-collection" data-collection-id="${collection.id}">
        <div class="category-header">
          <h3 class="category-title">
            <span class="top10-badge romantic-badge">ğŸ’• TOP 10</span>
            <span class="romantic-genre-name">${romanticGenreName}</span>
          </h3>
          <button class="btn-delete-top10-collection" data-action="delete-top10-collection" data-collection-id="${collection.id}">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="3 6 5 6 21 6"></polyline>
              <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
            </svg>
            ${t('detail.removeFromCollection')}
          </button>
        </div>
        <div class="top10-row">
          <button class="scroll-btn scroll-left" data-direction="left">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M15 18l-6-6 6-6"/>
            </svg>
          </button>
          <div class="top10-slider">
            ${collectionMovies.map((movie, index) => `
              <div class="top10-card romantic-card" data-movie-id="${movie.id}">
                <div class="top10-rank">${index + 1}</div>
                <div class="top10-poster-container">
                  ${movie.posterUrl 
                    ? `<img src="${movie.posterUrl}" alt="${movie.romanticTitle}" class="top10-poster-img" onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22200%22 height=%22300%22><rect fill=%22%23232323%22 width=%22200%22 height=%22300%22/><text fill=%22%23666%22 x=%2250%%22 y=%2250%%22 text-anchor=%22middle%22>No Image</text></svg>'">`
                    : `<div class="top10-poster-placeholder">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="#e50914" stroke="#e50914" stroke-width="2">
                          <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                        </svg>
                       </div>`
                  }
                  <div class="top10-hover-overlay">
                    <div class="top10-hover-info">
                      <h4 class="top10-hover-title">${movie.romanticTitle}</h4>
                      <p class="top10-hover-meta">${movie.year || ''} â€¢ ${t('collection.originally')}: ${movie.originalTitle}</p>
                    </div>
                  </div>
                </div>
              </div>
            `).join('')}
          </div>
          <button class="scroll-btn scroll-right" data-direction="right">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 18l6-6-6-6"/>
            </svg>
          </button>
        </div>
      </div>
    `;
  }).join('');
  
  // Initialize scroll buttons for romantic collections
  container.querySelectorAll('.top10-row').forEach(row => {
    const slider = row.querySelector('.top10-slider');
    const leftBtn = row.querySelector('.scroll-left');
    const rightBtn = row.querySelector('.scroll-right');
    
    if (leftBtn && slider) {
      leftBtn.addEventListener('click', () => {
        slider.scrollBy({ left: -400, behavior: 'smooth' });
      });
    }
    
    if (rightBtn && slider) {
      rightBtn.addEventListener('click', () => {
        slider.scrollBy({ left: 400, behavior: 'smooth' });
      });
    }
  });
  
  // Add event listeners for delete buttons and card clicks
  container.querySelectorAll('[data-action="delete-top10-collection"]').forEach(btn => {
    btn.addEventListener('click', async (e) => {
      e.stopPropagation();
      const collectionId = btn.dataset.collectionId;
      await deleteTop10Collection(collectionId);
    });
  });
  
  container.querySelectorAll('.top10-card.romantic-card').forEach(card => {
    card.addEventListener('click', () => {
      const movieId = card.dataset.movieId;
      showMovieDetail(movieId);
    });
  });
}

async function deleteTop10Collection(collectionId) {
  try {
    await window.api.deleteTop10Collection(collectionId);
    showToast(t('toast.removedFromCollection'));
    await loadCollection();
  } catch (error) {
    console.error('Error deleting top 10 collection:', error);
    showToast(`Error: ${error.message}`);
  }
}

async function showMovieDetail(movieId) {
  const movies = await window.api.getSavedMovies();
  const movie = movies.find(m => String(m.id) === String(movieId));
  
  if (!movie) {
    console.error('Movie not found:', movieId);
    return;
  }
  
  selectedMovieId = movie.id;
  
  const modal = document.getElementById('movieDetailModal');
  const posterUrl = movie.posterUrl || '';
  
  // Set poster and backdrop (using same poster image)
  document.getElementById('detailPoster').src = posterUrl;
  document.getElementById('detailBackdrop').src = posterUrl;
  document.getElementById('detailOriginalTitle').textContent = movie.originalTitle;
  document.getElementById('detailRomanticTitle').textContent = movie.romanticTitle;
  document.getElementById('detailRomanticSummary').textContent = movie.romanticSummary;
  
  // Update tags dynamically
  const metaContainer = modal.querySelector('.movie-detail-meta');
  if (metaContainer) {
    // Get tags from movie data or use defaults
    const tags = movie.tags && movie.tags.length > 0 
      ? movie.tags 
      : ['Romance', 'Love Story', 'Passion', 'AI Generated'];
    
    // Generate tag HTML with animation delays
    metaContainer.innerHTML = tags.map((tag, index) => 
      `<span class="meta-badge" style="animation-delay: ${0.3 + (index * 0.1)}s">${tag}</span>`
    ).join('');
  }
  
  // Store the original title for the watch button
  modal.dataset.originalTitle = movie.originalTitle;
  
  modal.classList.remove('hidden');
}

// Make globally accessible
window.showMovieDetail = showMovieDetail;

async function deleteMovieFromCollection(movieId) {
  await window.api.deleteMovie(movieId);
  showToast(t('toast.removedFromCollection'));
  await loadCollection();
}

// Make globally accessible
window.deleteMovieFromCollection = deleteMovieFromCollection;

async function deleteSelectedMovie() {
  if (!selectedMovieId) return;
  
  await window.api.deleteMovie(selectedMovieId);
  document.getElementById('movieDetailModal').classList.add('hidden');
  selectedMovieId = null;
  showToast(t('toast.removedFromCollection'));
  await loadCollection();
}

// ========================================
// Modals
// ========================================

function initModals() {
  const movieDetailModal = document.getElementById('movieDetailModal');
  const closeMovieDetailBtn = document.getElementById('closeMovieDetailBtn');
  const watchMovieBtn = document.getElementById('watchMovieBtn');
  const shareMovieBtn = document.getElementById('shareMovieBtn');
  
  closeMovieDetailBtn.addEventListener('click', () => {
    movieDetailModal.classList.add('hidden');
  });
  
  movieDetailModal.querySelector('.modal-overlay').addEventListener('click', () => {
    movieDetailModal.classList.add('hidden');
  });
  
  // Watch button - open Netflix search in browser
  watchMovieBtn.addEventListener('click', async () => {
    const originalTitle = movieDetailModal.dataset.originalTitle;
    if (originalTitle) {
      const netflixUrl = `https://www.netflix.com/search?q=${encodeURIComponent(originalTitle)}`;
      await window.api.openExternal(netflixUrl);
      showToast('ğŸ¬ Opening Netflix search...');
    } else {
      showToast('âŒ Movie information not available');
    }
  });
  
  // Share button - copy movie info to clipboard
  shareMovieBtn.addEventListener('click', async () => {
    const title = document.getElementById('detailRomanticTitle').textContent;
    const originalTitle = document.getElementById('detailOriginalTitle').textContent;
    const summary = document.getElementById('detailRomanticSummary').textContent;
    
    const shareText = `ğŸ¬ ${title}\n(Originally: ${originalTitle})\n\n${summary}\n\nğŸ’¥ Transformed by ActionFlix`;
    
    try {
      await navigator.clipboard.writeText(shareText);
      showToast('ğŸ“‹ Movie details copied to clipboard!');
    } catch (err) {
      console.error('Failed to copy:', err);
      showToast('âŒ Failed to copy to clipboard');
    }
  });
}

// ========================================
// Toast Notifications
// ========================================

function showToast(message, duration = 3000) {
  const toast = document.getElementById('toast');
  const toastMessage = document.getElementById('toastMessage');
  
  toastMessage.textContent = message;
  toast.classList.remove('hidden');
  
  setTimeout(() => {
    toast.classList.add('hidden');
  }, duration);
}

// ========================================
// About Modal
// ========================================

function initAboutModal() {
  const aboutModal = document.getElementById('aboutModal');
  const aboutCloseBtn = document.getElementById('aboutCloseBtn');
  const aboutBtn = document.getElementById('aboutBtn');
  
  // About button click handler
  aboutBtn.addEventListener('click', () => {
    showAboutModal();
  });
  
  // Listen for show-about event from main process (menu)
  window.api.onShowAbout(() => {
    showAboutModal();
  });
  
  // Close button
  aboutCloseBtn.addEventListener('click', () => {
    closeAboutModal();
  });
  
  // Click on overlay to close
  const modalOverlay = aboutModal.querySelector('.modal-overlay');
  if (modalOverlay) {
    modalOverlay.addEventListener('click', () => {
      closeAboutModal();
    });
  }
  
  // ESC key to close
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && !aboutModal.classList.contains('hidden')) {
      closeAboutModal();
    }
  });
  
  // Prevent clicks inside modal content from closing
  const aboutModalContent = aboutModal.querySelector('.about-modal-content');
  aboutModalContent.addEventListener('click', (e) => {
    e.stopPropagation();
  });
  
  // Handle external links
  const externalLinks = aboutModal.querySelectorAll('[data-external-url]');
  externalLinks.forEach(link => {
    link.addEventListener('click', async (e) => {
      e.preventDefault();
      const url = link.getAttribute('data-external-url');
      if (url) {
        await window.api.openExternal(url);
      }
    });
  });
}

async function showAboutModal() {
  const aboutModal = document.getElementById('aboutModal');
  const aboutVersion = document.getElementById('aboutVersion');
  
  // Get and display app version
  try {
    const version = await window.api.getAppVersion();
    aboutVersion.textContent = version;
  } catch (error) {
    console.error('Failed to get app version:', error);
    aboutVersion.textContent = 'Unknown';
  }
  
  // Show modal by removing hidden class
  aboutModal.classList.remove('hidden');
  
  // Focus trap for accessibility
  const closeBtn = document.getElementById('aboutCloseBtn');
  closeBtn.focus();
}

function closeAboutModal() {
  const aboutModal = document.getElementById('aboutModal');
  aboutModal.classList.add('hidden');
}

